// (c) 2019-2023 0b5vr - https://github.com/0b5vr/experimental-npm/blob/release/LICENSE
var Ar=Object.defineProperty;var ve=Object.getOwnPropertyDescriptor;var _e=Object.getOwnPropertyNames;var ke=Object.prototype.hasOwnProperty;var Ve=r=>Ar(r,"__esModule",{value:!0});var Se=(r,t)=>{for(var e in t)Ar(r,e,{get:t[e],enumerable:!0})},Ae=(r,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of _e(t))!ke.call(r,n)&&(e||n!=="default")&&Ar(r,n,{get:()=>t[n],enumerable:!(o=ve(t,n))||o.enumerable});return r};var Ce=(r=>(t,e)=>r&&r.get(t)||(e=Ae(Ve({}),t,1),r&&r.set(t,e),e))(typeof WeakMap!="undefined"?new WeakMap:0);var ct=(r,t,e)=>new Promise((o,n)=>{var i=s=>{try{p(e.next(s))}catch(m){n(m)}},a=s=>{try{p(e.throw(s))}catch(m){n(m)}},p=s=>s.done?o(s.value):Promise.resolve(s.value).then(i,a);p((e=e.apply(r,t)).next())});var co={};Se(co,{BinaryHeap:()=>Sr,Box3:()=>Zt,CDS:()=>re,Clock:()=>ut,ClockFrame:()=>ee,ClockRealtime:()=>oe,Euler:()=>st,ExpSmooth:()=>ie,GPUTimer:()=>Ir,HistoryMeanCalculator:()=>Ht,HistoryMedianCalculator:()=>ae,HistoryPercentileCalculator:()=>Ut,Line3:()=>Ft,MapOfSet:()=>vt,Matrix2:()=>O,Matrix3:()=>F,Matrix4:()=>P,Plane3:()=>tt,Planes3:()=>Mt,Pool:()=>Bt,Quaternion:()=>V,Ray3:()=>mt,SmoothDamp:()=>he,Sphere3:()=>_r,Swap:()=>we,TRIANGLE_STRIP_QUAD:()=>Ie,TRIANGLE_STRIP_QUAD_3D:()=>De,TRIANGLE_STRIP_QUAD_NORMAL:()=>qe,TRIANGLE_STRIP_QUAD_UV:()=>$e,TapTempo:()=>xe,Vector:()=>nt,Vector3:()=>w,Vector4:()=>Z,Xorshift:()=>ye,arrayRange:()=>Qe,arraySerial:()=>q,arraySetAdd:()=>Fe,arraySetDelete:()=>Jr,arraySetDiff:()=>Le,arraySetHas:()=>te,arraySetUnion:()=>Ee,asyncRetry:()=>le,binarySearch:()=>gt,box3ContainsPoint:()=>Dr,clamp:()=>Nt,colorFromAtariST:()=>Cr,colorHSV2RGB:()=>Ye,colorToHex:()=>Qr,colorTurbo:()=>Ze,createPokerDeck:()=>io,createTinyseqPolyReader:()=>be,createTinyseqReader:()=>Re,dagEdgesAncestors:()=>We,dagEdgesChildren:()=>Er,dagEdgesDescendants:()=>Je,dagEdgesParent:()=>Lr,dagEdgesParents:()=>Fr,dagEdgesResolve:()=>to,debounce:()=>ge,edt1d:()=>Ot,edt2d:()=>ne,eotfRec709:()=>Ke,eulerFromMat3:()=>at,eulerFromMat4:()=>$r,eulerFromQuaternion:()=>zr,evaluatePokerHand:()=>ao,getYugopText:()=>Me,lerp:()=>Pt,line3ApplyMatrix4:()=>Br,line3At:()=>Ct,line3ClosestPointToPoint:()=>Qt,line3Delta:()=>At,line3DistanceToPoint:()=>Hr,linearstep:()=>ot,mat2Determinant:()=>Tr,mat2Inverse:()=>Pr,mat2Multiply:()=>Et,mat2Transpose:()=>vr,mat3CreateNormalMatrix:()=>jt,mat3Determinant:()=>Wt,mat3FromMat4:()=>W,mat3FromMat4Transpose:()=>Kt,mat3FromQuaternion:()=>bt,mat3Inverse:()=>xt,mat3Multiply:()=>kt,mat3Transpose:()=>Jt,mat4Compose:()=>tr,mat4Decompose:()=>er,mat4Determinant:()=>Rt,mat4FromMat3:()=>or,mat4FromQuaternion:()=>J,mat4Inverse:()=>nr,mat4LookAt:()=>ir,mat4LookAtInverse:()=>ar,mat4Multiply:()=>Vt,mat4Perspective:()=>sr,mat4RotationX:()=>mr,mat4RotationY:()=>pr,mat4RotationZ:()=>cr,mat4Scale:()=>ur,mat4ScaleScalar:()=>lr,mat4Translate:()=>fr,mat4Transpose:()=>hr,matrix2d:()=>Oe,matrix3d:()=>Be,midiParse:()=>ue,mod:()=>qr,notifyObservers:()=>Te,oetfRec709:()=>je,parseSTNICCC:()=>mo,plane3ApplyMatrix4:()=>Ur,plane3DistanceToPoint:()=>Y,plane3Normalize:()=>G,planes3ContainPoint:()=>Gr,planes3FromBox3:()=>Xr,planes3FromProjectionMatrix:()=>Yr,planes3IntersectBox3:()=>Zr,planes3IntersectSphere3:()=>Kr,pokerHandStrengthMap:()=>U,pokerHandsByStrength:()=>so,pokerRankStrengthMap:()=>y,pokerRanksByStrength:()=>pt,pokerSuitIndexMap:()=>Vr,pokerSuitsByIndex:()=>Wr,quatFromAxisAngle:()=>wr,quatFromEuler:()=>gr,quatFromMatrix3:()=>rr,quatFromMatrix4:()=>dt,quatInverse:()=>ht,quatLookRotation:()=>xr,quatMultiply:()=>it,quatNormalize:()=>br,quatRotationX:()=>Rr,quatRotationY:()=>dr,quatRotationZ:()=>yr,quatSlerp:()=>Mr,range:()=>He,ray3DistanceToSphere:()=>Nr,ray3FromLine3:()=>Or,retry:()=>fe,sanitizeAngle:()=>St,saturate:()=>B,shuffleArray:()=>ze,smootherstep:()=>Ge,smootheststep:()=>Xe,smoothstep:()=>Ue,sortPokerCardsByRank:()=>z,sphere3ContainsPoint:()=>jr,stnicccToSVG:()=>po,throttle:()=>Pe,tinyseqFromMidiParseResult:()=>de,traverse:()=>Tt,triIndexToLineIndex:()=>Ne,vec3ApplyMatrix3:()=>yt,vec3ApplyMatrix4:()=>X,vec3ApplyQuaternion:()=>Yt,vec3Cross:()=>$,vec3OrthoNormalize:()=>wt,vec4ApplyMatrix3:()=>kr,vec4ApplyMatrix4:()=>ft,vecAbs:()=>Gt,vecAdd:()=>H,vecDivide:()=>Xt,vecDot:()=>T,vecLength:()=>Q,vecLengthSq:()=>K,vecManhattanLength:()=>lt,vecMultiply:()=>_t,vecNeg:()=>j,vecNormalize:()=>C,vecScale:()=>R,vecSub:()=>S});function gt(r,t){if(typeof t!="function")return gt(r,i=>i<t);let e=t,o=0,n=r.length;for(;o<n;){let i=o+n>>1,a=r[i];e(a)?o=i+1:n=i}return o}function Tt(r,t){let e=[r],o=new Set(e);for(;e.length>0;){let n=e.shift(),i=t(n);if(!i)break;let a=i.filter(p=>!o.has(p));e.unshift(...a),a.map(p=>o.add(p))}}function Qe(r,t,e){let o=r,n=[];if(r<t)for(e=e!=null?e:1;o<t;)n.push(o),o+=e;else for(e=e!=null?e:-1;o>t;)n.push(o),o+=e;return n}var q=r=>[...Array(r)].map((t,e)=>e);function Jr(r,t){let e=r.indexOf(t);return e===-1?!1:(r.splice(e,1),!0)}function te(r,t){return r.indexOf(t)!==-1}function Fe(r,t){return r.indexOf(t)!==-1?!1:(r.push(t),!0)}function Ee(r,t){let e=[...r];return t.forEach(o=>{te(e,o)||e.push(o)}),e}function Le(r,t){let e=[...r];return t.forEach(o=>{Jr(e,o)}),e}var Ie=[-1,-1,1,-1,-1,1,1,1],De=[-1,-1,0,1,-1,0,-1,1,0,1,1,0],qe=[0,0,1,0,0,1,0,0,1,0,0,1],$e=[0,0,1,0,0,1,1,1];function ze(r,t){let e=t||(()=>Math.random());for(let o=0;o<r.length-1;o++){let n=o+Math.floor(e()*(r.length-o)),i=r[n];r[n]=r[o],r[o]=i}return r}function Ne(r){let t=[];for(let e=0;e<r.length/3;e++){let o=e*3;t.push(r[o],r[o+1],r[o+1],r[o+2],r[o+2],r[o])}return t}function Oe(r,t){let e=[];for(let o=0;o<t;o++)for(let n=0;n<r;n++)e.push(n,o);return e}function Be(r,t,e){let o=[];for(let n=0;n<e;n++)for(let i=0;i<t;i++)for(let a=0;a<r;a++)o.push(a,i,n);return o}var re=class{constructor(){this.factor=100;this.ratio=1;this.velocity=0;this.value=0;this.target=0}update(t){return this.velocity+=(-this.factor*(this.value-this.target)-2*this.velocity*Math.sqrt(this.factor)*this.ratio)*t,this.value+=this.velocity*t,this.value}};var ut=class{constructor(){this.__time=0;this.__deltaTime=0;this.__isPlaying=!1}get time(){return this.__time}get deltaTime(){return this.__deltaTime}get isPlaying(){return this.__isPlaying}update(t){let e=this.__time;this.__time=t||0,this.__deltaTime=this.__time-e}play(){this.__isPlaying=!0}pause(){this.__isPlaying=!1}setTime(t){this.__time=t}};var ee=class extends ut{constructor(t=60){super();this.__frame=0;this.__fps=t}get frame(){return this.__frame}get fps(){return this.__fps}update(){this.__isPlaying?(this.__time=this.__frame/this.__fps,this.__deltaTime=1/this.__fps,this.__frame++):this.__deltaTime=0}setTime(t){this.__frame=Math.floor(this.__fps*t),this.__time=this.__frame/this.__fps}};var oe=class extends ut{constructor(){super(...arguments);this.__rtTime=0;this.__rtDate=performance.now()}get isRealtime(){return!0}update(){let t=performance.now();if(this.__isPlaying){let e=this.__time,o=t-this.__rtDate;this.__time=this.__rtTime+o/1e3,this.__deltaTime=this.time-e}else this.__rtTime=this.time,this.__rtDate=t,this.__deltaTime=0}setTime(t){this.__time=t,this.__rtTime=this.time,this.__rtDate=performance.now()}};function Cr(r){return[(r>>8&7)/7,(r>>4&7)/7,(r&7)/7]}function Pt(r,t,e){return r+(t-r)*e}function Nt(r,t,e){return Math.min(Math.max(r,t),e)}function B(r){return Nt(r,0,1)}function He(r,t,e,o,n){return(r-t)*(n-o)/(e-t)+o}function ot(r,t,e){return B((e-r)/(t-r))}function Ue(r,t,e){let o=ot(r,t,e);return o*o*(3-2*o)}function Ge(r,t,e){let o=ot(r,t,e);return o*o*o*(o*(o*6-15)+10)}function Xe(r,t,e){let o=ot(r,t,e);return o*o*o*o*(o*(o*(-20*o+70)-84)+35)}function Ye([r,t,e]){let o=r%1*6;return[0,4,2].map(n=>{let i=Math.min(Math.max(Math.abs((o+n)%6-3)-1,0),1),a=Pt(1,i,t);return e*a})}function Qr(r){return"#"+r.map(t=>("0"+Math.round(B(t)*255).toString(16)).slice(-2)).join("")}function T(r,t){return r.reduce((e,o,n)=>e+o*t[n],0)}function Ze(r){let t=[.13572138,4.6153926,-42.66032258,132.13108234,-152.94239396,59.28637943],e=[.09140261,2.19418839,4.84296658,-14.18503333,4.27729857,2.82956604],o=[.1066733,12.64194608,-60.58204836,110.36276771,-89.90310912,27.34824973],n=B(r),i=[1,n,n*n,n*n*n,n*n*n*n,n*n*n*n*n];return[B(T(t,i)),B(T(e,i)),B(T(o,i))]}function Ke(r){return r.map(t=>t<.081?t/4.5:Math.pow((t+.099)/1.099,1/.45))}function je(r){return r.map(t=>t<.018?4.5*t:1.099*Math.pow(t,.45)-.099)}function Fr(r,t){return r.filter(e=>e[1]===t).map(e=>e[0])}function We(r,t){let e=new Set;return Tt(t,o=>{let n=Fr(r,o);return n.map(i=>e.add(i)),n}),Array.from(e)}function Er(r,t){return r.filter(e=>e[0]===t).map(e=>e[1])}function Je(r,t){let e=new Set;return Tt(t,o=>{let n=Er(r,o);return n.map(i=>e.add(i)),n}),Array.from(e)}function Lr(r,t){var e,o;return(o=(e=r.find(n=>n[1]===t))==null?void 0:e[0])!=null?o:null}function to(r,t){let e=[],o=new Set(t),n=r.concat();for(;n.length>0;)o.forEach(i=>{Lr(n,i)!=null||(o.delete(i),e.push(i),n=n.filter(([p])=>p!==i))});return e.concat(Array.from(o))}function Ot(r,t,e,o){let n=0,i=new Float32Array(o);i[0]=0;let a=new Float32Array(o+1);a[0]=-1/0,a[1]=1/0;let p=new Float32Array(o);for(let s=0;s<o;s++)p[s]=r[t+s*e];for(let s=1;s<o;s++){let m=0;for(;0<=n&&(m=(p[s]+s*s-p[i[n]]-i[n]*i[n])/(2*s-2*i[n]),m<=a[n]);)n--;n++,i[n]=s,a[n]=m,a[n+1]=1/0}n=0;for(let s=0;s<o;s++){for(;a[n+1]<s;)n++;let m=s-i[n];r[t+s*e]=p[i[n]]+m*m}}function ne(r,t,e){for(let o=0;o<t;o++)Ot(r,o,t,e);for(let o=0;o<e;o++)Ot(r,o*t,1,t)}var ie=class{constructor(){this.factor=10;this.target=0;this.value=0}update(t){return this.value=Pt(this.target,this.value,Math.exp(-this.factor*t)),this.value}};var Bt=class{constructor(t){this.index=0;this.array=t}get current(){return this.array[this.index]}next(){return this.index=(this.index+1)%this.array.length,this.current}};var Ir=class{static isSupported(t){return new Set(t.getSupportedExtensions()).has("EXT_disjoint_timer_query_webgl2")}constructor(t){this.gl=t;let e=new Array(1024).fill(1).map(()=>t.createQuery());this.queries=new Bt(e),this.stack=[],this.ext=t.getExtension("EXT_disjoint_timer_query_webgl2"),this.__loopTasks=new Set;let o=()=>{this.update(),requestAnimationFrame(o)};o()}update(){Array.from(this.__loopTasks).forEach(t=>t())}measure(t){return ct(this,null,function*(){let{gl:e}=this;if(this.stack.length!==0){e.endQuery(this.ext.TIME_ELAPSED_EXT);let i=this.check(this.queries.current);this.stack=this.stack.map(a=>ct(this,null,function*(){return(yield a)+(yield i)}))}this.stack.push(Promise.resolve(0)),e.beginQuery(this.ext.TIME_ELAPSED_EXT,this.queries.next()),t(),e.endQuery(this.ext.TIME_ELAPSED_EXT);let o=this.stack.pop(),n=this.check(this.queries.current);return this.stack.length!==0&&(this.stack=this.stack.map(i=>ct(this,null,function*(){return(yield i)+(yield n)})),e.beginQuery(this.ext.TIME_ELAPSED_EXT,this.queries.next())),(yield o)+(yield n)})}check(t){let{gl:e}=this;return new Promise(o=>{let n=()=>{e.getQueryParameter(t,e.QUERY_RESULT_AVAILABLE)&&(this.__loopTasks.delete(n),o(e.getQueryParameter(t,e.QUERY_RESULT)*.001*.001))};this.__loopTasks.add(n)})}};var Ht=class{constructor(t){this.__recalcForEach=0;this.__countUntilRecalc=0;this.__history=[];this.__index=0;this.__count=0;this.__cache=0;this.__length=t,this.__recalcForEach=t;for(let e=0;e<t;e++)this.__history[e]=0}get mean(){let t=Math.min(this.__count,this.__length);return t===0?0:this.__cache/t}get recalcForEach(){return this.__recalcForEach}set recalcForEach(t){let e=t-this.__recalcForEach;this.__recalcForEach=t,this.__countUntilRecalc=Math.max(0,this.__countUntilRecalc+e)}reset(){this.__index=0,this.__count=0,this.__cache=0,this.__countUntilRecalc=0;for(let t=0;t<this.__length;t++)this.__history[t]=0}push(t){let e=this.__history[this.__index];this.__history[this.__index]=t,this.__count++,this.__index=(this.__index+1)%this.__length,this.__countUntilRecalc===0?this.recalc():(this.__countUntilRecalc--,this.__cache-=e,this.__cache+=t)}recalc(){this.__countUntilRecalc=this.__recalcForEach;let t=this.__history.slice(0,Math.min(this.__count,this.__length)).reduce((e,o)=>e+o,0);this.__cache=t}};var Ut=class{constructor(t){this.__history=[];this.__sorted=[];this.__index=0;this.__length=t}get median(){return this.percentile(50)}percentile(t){return this.__history.length===0?0:this.__sorted[Math.round(t*.01*(this.__history.length-1))]}reset(){this.__index=0,this.__history=[],this.__sorted=[]}push(t){let e=this.__history[this.__index];if(this.__history[this.__index]=t,this.__index=(this.__index+1)%this.__length,this.__sorted.length===this.__length){let n=gt(this.__sorted,e);this.__sorted.splice(n,1)}let o=gt(this.__sorted,t);this.__sorted.splice(o,0,t)}};var ae=class extends Ut{constructor(t){super(t);console.warn("HistoryMedianCalculator: Deprecated. Use HistoryPercentileCalculator instead")}};var vt=class{constructor(){this.map=new Map}get(t){var e;return(e=this.map.get(t))!=null?e:new Set}add(t,e){let o=this.map.get(t);o==null&&(o=new Set,this.map.set(t,o)),o.add(e)}};function Gt(r){return r.map(t=>Math.abs(t))}function H(...r){if(r.length<2)return r[0];let t=r.shift(),e=H(...r);return t.map((o,n)=>o+e[n])}function Xt(r,t){return r.map((e,o)=>e/t[o])}function Q(r){return Math.sqrt(r.reduce((t,e)=>t+e*e,0))}function K(r){return r.reduce((t,e)=>t+e*e,0)}function lt(r){return r.reduce((t,e)=>t+Math.abs(e),0)}function _t(...r){if(r.length<2)return r[0];let t=r.shift(),e=_t(...r);return t.map((o,n)=>o*e[n])}function j(r){return r.map(t=>-t)}function R(r,t){return r.map(e=>e*t)}function C(r){let t=Q(r),e=t===0?0:1/t;return R(r,e)}function S(r,t){return r.map((e,o)=>e-t[o])}var nt=class{get length(){return Q(this.elements)}get lengthSq(){return K(this.elements)}get manhattanLength(){return lt(this.elements)}get normalized(){return this.__new(C(this.elements))}get negated(){return this.__new(j(this.elements))}get abs(){return this.__new(Gt(this.elements))}clone(){return this.__new(this.elements.concat())}add(...t){return this.__new(H(this.elements,...t.map(e=>e.elements)))}sub(t){return this.__new(S(this.elements,t.elements))}multiply(...t){return this.__new(_t(this.elements,...t.map(e=>e.elements)))}divide(t){return this.__new(Xt(this.elements,t.elements))}scale(t){return this.__new(R(this.elements,t))}dot(t){return T(this.elements,t.elements)}};function ft(r,t){return[t[0]*r[0]+t[4]*r[1]+t[8]*r[2]+t[12]*r[3],t[1]*r[0]+t[5]*r[1]+t[9]*r[2]+t[13]*r[3],t[2]*r[0]+t[6]*r[1]+t[10]*r[2]+t[14]*r[3],t[3]*r[0]+t[7]*r[1]+t[11]*r[2]+t[15]*r[3]]}function X(r,t){let e=ft([...r,1],t),o=[e[0],e[1],e[2]],n=e[3];return R(o,1/n)}function ht(r){return[-r[0],-r[1],-r[2],r[3]]}function it(...r){if(r.length<2)return r[0];let t=r.shift(),e=it(...r);return[t[3]*e[0]+t[0]*e[3]+t[1]*e[2]-t[2]*e[1],t[3]*e[1]-t[0]*e[2]+t[1]*e[3]+t[2]*e[0],t[3]*e[2]+t[0]*e[1]-t[1]*e[0]+t[2]*e[3],t[3]*e[3]-t[0]*e[0]-t[1]*e[1]-t[2]*e[2]]}function Yt(r,t){let e=[...r,0],o=ht(t),n=it(t,e,o);return n.pop(),n}function $(r,t){return[r[1]*t[2]-r[2]*t[1],r[2]*t[0]-r[0]*t[2],r[0]*t[1]-r[1]*t[0]]}function wt(r,t=[0,1,0],e){let o=C(r),n=C(t),i=T(o,n);i===1&&(Math.abs(o[1])>Math.abs(o[2])?n=[0,0,1]:n=[0,1,0],i=T(o,n)),n=C(S(n,R(o,i)));let a=$(n,o);return e&&T(a,e)<0&&(a=j(a)),{normal:o,tangent:n,binormal:a}}var w=class extends nt{constructor(t=[0,0,0]){super();this.elements=t}get x(){return this.elements[0]}set x(t){this.elements[0]=t}get y(){return this.elements[1]}set y(t){this.elements[1]=t}get z(){return this.elements[2]}set z(t){this.elements[2]=t}toString(){return`Vector3( ${this.x.toFixed(3)}, ${this.y.toFixed(3)}, ${this.z.toFixed(3)} )`}cross(t){return new w($(this.elements,t.elements))}applyQuaternion(t){return new w(Yt(this.elements,t.elements))}applyMatrix4(t){return new w(X(this.elements,t.elements))}__new(t){return new w(t)}static get zero(){return new w([0,0,0])}static get px(){return new w([1,0,0])}static get nx(){return new w([-1,0,0])}static get py(){return new w([0,1,0])}static get ny(){return new w([0,-1,0])}static get pz(){return new w([0,0,1])}static get nz(){return new w([0,0,-1])}static get one(){return new w([1,1,1])}static orthoNormalize(t,e,o){let n=wt(t.elements,e.elements,o.elements);return{normal:new w(n.normal),tangent:new w(n.tangent),binormal:new w(n.binormal)}}};function Dr(r,t){return r[0][0]<=t[0]&&r[1][0]>=t[0]&&r[0][1]<=t[1]&&r[1][1]>=t[1]&&r[0][2]<=t[2]&&r[1][2]>=t[2]}var Zt=class{constructor(t=w.zero,e=w.zero){this.min=t,this.max=e}get raw(){return[this.min.elements,this.max.elements]}containsPoint(t){return Dr(this.raw,t.elements)}static fromRaw(t){return new Zt(new w(t[0]),new w(t[1]))}};function Kt(r){return[r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]]}function xt(r){let t=r[0],e=r[1],o=r[2],n=r[3],i=r[4],a=r[5],p=r[6],s=r[7],m=r[8],u=m*i-a*s,c=a*p-m*n,l=s*n-i*p,h=t*u+e*c+o*l;return h===0?R(r,0):R([u,o*s-m*e,a*e-o*i,c,m*t-o*p,o*n-a*t,l,e*p-s*t,i*t-e*n],1/h)}function jt(r){return xt(Kt(r))}function Wt(r){let t=r[0],e=r[1],o=r[2],n=r[3],i=r[4],a=r[5],p=r[6],s=r[7],m=r[8],u=m*i-a*s,c=a*p-m*n,l=s*n-i*p;return t*u+e*c+o*l}function W(r){return[r[0],r[1],r[2],r[4],r[5],r[6],r[8],r[9],r[10]]}function bt(r){let t=r[0],e=r[1],o=r[2],n=r[3];return[1-2*e*e-2*o*o,2*t*e+2*o*n,2*t*o-2*e*n,2*t*e-2*o*n,1-2*t*t-2*o*o,2*e*o+2*t*n,2*t*o+2*e*n,2*e*o-2*t*n,1-2*t*t-2*e*e]}function kt(...r){if(r.length<2)return r[0];let t=r.shift(),e=kt(...r),o=t[0],n=t[1],i=t[2],a=t[3],p=t[4],s=t[5],m=t[6],u=t[7],c=t[8],l=e[0],h=e[1],f=e[2],x=e[3],b=e[4],d=e[5],M=e[6],g=e[7],k=e[8];return[o*l+a*h+m*f,n*l+p*h+u*f,i*l+s*h+c*f,o*x+a*b+m*d,n*x+p*b+u*d,i*x+s*b+c*d,o*M+a*g+m*k,n*M+p*g+u*k,i*M+s*g+c*k]}function Jt(r){return[r[0],r[3],r[6],r[1],r[4],r[7],r[2],r[5],r[8]]}var se=[1,0,0,0,1,0,0,0,1],F=class{constructor(t=se){this.elements=t}get transpose(){return new F(Jt(this.elements))}get determinant(){return Wt(this.elements)}get inverse(){return new F(xt(this.elements))}get matrix4(){return P.fromMatrix3(this)}toString(){let t=this.elements.map(e=>e.toFixed(3));return`Matrix3( ${t[0]}, ${t[3]}, ${t[6]}; ${t[1]}, ${t[4]}, ${t[7]}; ${t[2]}, ${t[5]}, ${t[8]} )`}clone(){return new F(this.elements.concat())}multiply(...t){return F.multiply(this,...t)}scaleScalar(t){return new F(R(this.elements,t))}static get identity(){return new F(se)}static multiply(...t){return t.length===0?F.identity:new F(kt(...t.map(e=>e.elements)))}static createNormalMatrix(t){return new F(jt(t.elements))}static fromMatrix4(t){return new F(W(t.elements))}static fromQuaternion(t){return new F(bt(t.elements))}};function J(r){let t=r[0],e=r[1],o=r[2],n=r[3];return[1-2*e*e-2*o*o,2*t*e+2*o*n,2*t*o-2*e*n,0,2*t*e-2*o*n,1-2*t*t-2*o*o,2*e*o+2*t*n,0,2*t*o+2*e*n,2*e*o-2*t*n,1-2*t*t-2*e*e,0,0,0,0,1]}function tr(r,t,e){let o=J(t),n=e[0],i=e[1],a=e[2];return[o[0]*n,o[1]*n,o[2]*n,0,o[4]*i,o[5]*i,o[6]*i,0,o[8]*a,o[9]*a,o[10]*a,0,r[0],r[1],r[2],1]}function Rt(r){let t=r[0],e=r[1],o=r[2],n=r[3],i=r[4],a=r[5],p=r[6],s=r[7],m=r[8],u=r[9],c=r[10],l=r[11],h=r[12],f=r[13],x=r[14],b=r[15],d=t*a-e*i,M=t*p-o*i,g=t*s-n*i,k=e*p-o*a,_=e*s-n*a,A=o*s-n*p,v=m*f-u*h,E=m*x-c*h,L=m*b-l*h,I=u*x-c*f,D=u*b-l*f,N=c*b-l*x;return d*N-M*D+g*I+k*L-_*E+A*v}function rr(r){let t=r[0],e=r[3],o=r[6],n=r[1],i=r[4],a=r[7],p=r[2],s=r[5],m=r[8],u=t+i+m;if(u>0){let c=.5/Math.sqrt(u+1);return[(s-a)*c,(o-p)*c,(n-e)*c,.25/c]}else if(t>i&&t>m){let c=2*Math.sqrt(1+t-i-m);return[.25*c,(e+n)/c,(o+p)/c,(s-a)/c]}else if(i>m){let c=2*Math.sqrt(1+i-t-m);return[(e+n)/c,.25*c,(a+s)/c,(o-p)/c]}else{let c=2*Math.sqrt(1+m-t-i);return[(o+p)/c,(a+s)/c,.25*c,(n-e)/c]}}function dt(r){return rr(W(r))}function er(r){let t=Q([r[0],r[1],r[2]]),e=Q([r[4],r[5],r[6]]),o=Q([r[8],r[9],r[10]]);Rt(r)<0&&(t=-t);let i=1/t,a=1/e,p=1/o,s=r.concat();return s[0]*=i,s[1]*=i,s[2]*=i,s[4]*=a,s[5]*=a,s[6]*=a,s[8]*=p,s[9]*=p,s[10]*=p,{position:[r[12],r[13],r[14]],scale:[t,e,o],rotation:dt(s)}}function or(r){return[r[0],r[1],r[2],0,r[3],r[4],r[5],0,r[6],r[7],r[8],0,0,0,0,1]}function nr(r){let t=r[0],e=r[1],o=r[2],n=r[3],i=r[4],a=r[5],p=r[6],s=r[7],m=r[8],u=r[9],c=r[10],l=r[11],h=r[12],f=r[13],x=r[14],b=r[15],d=t*a-e*i,M=t*p-o*i,g=t*s-n*i,k=e*p-o*a,_=e*s-n*a,A=o*s-n*p,v=m*f-u*h,E=m*x-c*h,L=m*b-l*h,I=u*x-c*f,D=u*b-l*f,N=c*b-l*x,et=d*N-M*D+g*I+k*L-_*E+A*v;return et===0?R(r,0):R([a*N-p*D+s*I,o*D-e*N-n*I,f*A-x*_+b*k,c*_-u*A-l*k,p*L-i*N-s*E,t*N-o*L+n*E,x*g-h*A-b*M,m*A-c*g+l*M,i*D-a*L+s*v,e*L-t*D-n*v,h*_-f*g+b*d,u*g-m*_-l*d,a*E-i*I-p*v,t*I-e*E+o*v,f*M-h*k-x*d,m*k-u*M+c*d],1/et)}function ir(r,t=[0,0,0],e=[0,1,0],o=0){let n=C(S(r,t)),i=C($(e,n));o!==0&&(i=H(R(i,Math.cos(o)),R($(n,i),Math.sin(o))));let a=$(n,i);return[i[0],i[1],i[2],0,a[0],a[1],a[2],0,n[0],n[1],n[2],0,r[0],r[1],r[2],1]}function ar(r,t=[0,0,0],e=[0,1,0],o=0){let n=C(S(r,t)),i=C($(e,n));o!==0&&(i=H(R(i,Math.cos(o)),R($(n,i),Math.sin(o))));let a=$(n,i);return[i[0],a[0],n[0],0,i[1],a[1],n[1],0,i[2],a[2],n[2],0,-T(i,r),-T(a,r),-T(n,r),1]}function Vt(...r){if(r.length<2)return r[0];let t=r.shift(),e=Vt(...r),o=t[0],n=t[1],i=t[2],a=t[3],p=t[4],s=t[5],m=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11],x=t[12],b=t[13],d=t[14],M=t[15],g=e[0],k=e[1],_=e[2],A=e[3],v=e[4],E=e[5],L=e[6],I=e[7],D=e[8],N=e[9],et=e[10],It=e[11],Dt=e[12],qt=e[13],$t=e[14],zt=e[15];return[o*g+p*k+c*_+x*A,n*g+s*k+l*_+b*A,i*g+m*k+h*_+d*A,a*g+u*k+f*_+M*A,o*v+p*E+c*L+x*I,n*v+s*E+l*L+b*I,i*v+m*E+h*L+d*I,a*v+u*E+f*L+M*I,o*D+p*N+c*et+x*It,n*D+s*N+l*et+b*It,i*D+m*N+h*et+d*It,a*D+u*N+f*et+M*It,o*Dt+p*qt+c*$t+x*zt,n*Dt+s*qt+l*$t+b*zt,i*Dt+m*qt+h*$t+d*zt,a*Dt+u*qt+f*$t+M*zt]}function sr(r=45,t=.01,e=100,o=1){let n=1/Math.tan(r*Math.PI/360),i=e-t;return[n/o,0,0,0,0,n,0,0,0,0,-(e+t)/i,-1,0,0,-2*e*t/i,0]}function mr(r){let t=Math.cos(r),e=Math.sin(r);return[1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1]}function pr(r){let t=Math.cos(r),e=Math.sin(r);return[t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1]}function cr(r){let t=Math.cos(r),e=Math.sin(r);return[t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1]}function ur(r){return[r[0],0,0,0,0,r[1],0,0,0,0,r[2],0,0,0,0,1]}function lr(r){return[r,0,0,0,0,r,0,0,0,0,r,0,0,0,0,1]}function fr(r){return[1,0,0,0,0,1,0,0,0,0,1,0,r[0],r[1],r[2],1]}function hr(r){return[r[0],r[4],r[8],r[12],r[1],r[5],r[9],r[13],r[2],r[6],r[10],r[14],r[3],r[7],r[11],r[15]]}var me=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],P=class{constructor(t=me){this.elements=t}get transpose(){return new P(hr(this.elements))}get determinant(){return Rt(this.elements)}get inverse(){return new P(nr(this.elements))}get matrix3(){return F.fromMatrix4(this)}get normalMatrix(){return F.createNormalMatrix(this)}toString(){let t=this.elements.map(e=>e.toFixed(3));return`Matrix4( ${t[0]}, ${t[4]}, ${t[8]}, ${t[12]}; ${t[1]}, ${t[5]}, ${t[9]}, ${t[13]}; ${t[2]}, ${t[6]}, ${t[10]}, ${t[14]}; ${t[3]}, ${t[7]}, ${t[11]}, ${t[15]} )`}clone(){return new P(this.elements.concat())}multiply(...t){return P.multiply(this,...t)}scaleScalar(t){return new P(R(this.elements,t))}decompose(){let{position:t,scale:e,rotation:o}=er(this.elements);return{position:new w(t),scale:new w(e),rotation:new V(o)}}static get identity(){return new P(me)}static multiply(...t){return t.length===0?P.identity:new P(Vt(...t.map(e=>e.elements)))}static fromQuaternion(t){return new P(J(t.elements))}static fromMatrix3(t){return new P(or(t.elements))}static translate(t){return new P(fr(t.elements))}static scale(t){return new P(ur(t.elements))}static scaleScalar(t){return new P(lr(t))}static rotationX(t){return new P(mr(t))}static rotationY(t){return new P(pr(t))}static rotationZ(t){return new P(cr(t))}static lookAt(t,e=new w([0,0,0]),o=new w([0,1,0]),n=0){return new P(ir(t.elements,e.elements,o.elements,n))}static lookAtInverse(t,e=new w([0,0,0]),o=new w([0,1,0]),n=0){return new P(ar(t.elements,e.elements,o.elements,n))}static perspective(t=45,e=.01,o=100){return new P(sr(t,e,o))}static compose(t,e,o){return new P(tr(t.elements,e.elements,o.elements))}};function wr(r,t){let e=t/2,o=Math.sin(e);return[r[0]*o,r[1]*o,r[2]*o,Math.cos(e)]}function xr(r,t){let{normal:e,tangent:o,binormal:n}=wt(r,t!=null?t:[0,1,0]),i=Math.sqrt(1+n[0]+o[1]+e[2])*.5,a=.25/i;return[(o[2]-e[1])*a,(e[0]-n[2])*a,(n[1]-o[0])*a,i]}function br(r){let t=Q(r);return t===0?[0,0,0,1]:R(r,1/t)}function Rr(r){return[Math.sin(r/2),0,0,Math.cos(r/2)]}function dr(r){return[0,Math.sin(r/2),0,Math.cos(r/2)]}function yr(r){return[0,0,Math.sin(r/2),Math.cos(r/2)]}function Mr(r,t,e){if(e===0)return r.concat();if(e===1)return t.concat();let o=T(r,t);if(o<0&&(t=j(t),o=-o),o>=1)return r.concat();let n=1-o*o;if(n<=Number.EPSILON){let m=1-e;return C([m*r[0]+e*t[0],m*r[1]+e*t[1],m*r[2]+e*t[2],m*r[3]+e*t[3]])}let i=Math.sqrt(n),a=Math.atan2(i,o),p=Math.sin((1-e)*a)/i,s=Math.sin(e*a)/i;return[r[0]*p+t[0]*s,r[1]*p+t[1]*s,r[2]*p+t[2]*s,r[3]*p+t[3]*s]}var pe=[0,0,0,1],V=class{constructor(t=pe){this.elements=t}get x(){return this.elements[0]}get y(){return this.elements[1]}get z(){return this.elements[2]}get w(){return this.elements[3]}toString(){return`Quaternion( ${this.x.toFixed(3)}, ${this.y.toFixed(3)}, ${this.z.toFixed(3)}, ${this.w.toFixed(3)} )`}clone(){return new V(this.elements.concat())}get matrix4(){return new P(J(this.elements))}get inversed(){return new V(ht(this.elements))}get length(){return Q(this.elements)}get lengthSq(){return K(this.elements)}get normalized(){return new V(br(this.elements))}multiply(...t){return V.multiply(this,...t)}slerp(t,e){return V.slerp(this,t,e)}static get identity(){return new V(pe)}static multiply(...t){return t.length===0?V.identity:new V(it(...t.map(e=>e.elements)))}static slerp(t,e,o){return new V(Mr(t.elements,e.elements,o))}static rotationX(t){return new V(Rr(t))}static rotationY(t){return new V(dr(t))}static rotationZ(t){return new V(yr(t))}static lookRotation(t,e){return new V(xr(t.elements,e.elements))}static fromAxisAngle(t,e){return new V(wr(t.elements,e))}static fromMatrix4(t){return new V(dt(t.elements))}};function qr(r,t){return r-Math.floor(r/t)*t}function St(r){return qr(r+Math.PI,2*Math.PI)-Math.PI}function at(r,t){let[e,o,n,i]=!t||t==="XYZ"?[0,1,2,1]:t==="XZY"?[0,2,1,-1]:t==="YXZ"?[1,0,2,-1]:t==="YZX"?[1,2,0,1]:t==="ZXY"?[2,0,1,1]:[2,1,0,-1],a=[0,0,0],p=r[n+e*3];return a[o]=-i*Math.asin(Nt(p,-1,1)),Math.abs(p)<.999999?(a[e]=i*Math.atan2(r[n+o*3],r[n*4]),a[n]=i*Math.atan2(r[o+e*3],r[e*4])):a[e]=i*Math.atan2(-r[o+n*3],r[o*4]),lt(a)>1.5*Math.PI&&(a[e]=St(a[e]+Math.PI),a[o]=St(Math.PI-a[o]),a[n]=St(a[n]+Math.PI)),a}function $r(r,t){return at(W(r),t)}function zr(r,t){return at(bt(r),t)}function gr(r,t){let[e,o,n,i]=!t||t==="XYZ"?[0,1,2,1]:t==="XZY"?[0,2,1,-1]:t==="YXZ"?[1,0,2,-1]:t==="YZX"?[1,2,0,1]:t==="ZXY"?[2,0,1,1]:[2,1,0,-1],a=.5*r[e],p=.5*i*r[o],s=.5*r[n],m=Math.cos(a),u=Math.cos(p),c=Math.cos(s),l=Math.sin(a),h=Math.sin(p),f=Math.sin(s),x=[0,0,0,c*u*m+f*h*l];return x[e]=c*u*l-f*h*m,x[o]=i*(c*h*m+f*u*l),x[n]=f*u*m-c*h*l,x}var st=class{constructor(t=[0,0,0],e="XYZ"){this.elements=t,this.order=e}get x(){return this.elements[0]}get y(){return this.elements[1]}get z(){return this.elements[2]}toString(){return`Euler( ${this.x.toFixed(3)}, ${this.y.toFixed(3)}, ${this.z.toFixed(3)} (${this.order}) )`}clone(){return new st(this.elements.concat(),this.order)}get quaternion(){return new V(gr(this.elements,this.order))}get matrix4(){return this.quaternion.matrix4}static fromMatrix3(t,e){return new st(at(t.elements,e),e)}static fromMatrix4(t,e){return new st($r(t.elements,e),e)}static fromQuaternion(t,e){return new st(zr(t.elements,e),e)}};function Nr([r,t],e){let o=S(r,e[0]),n=T(o,t),i=T(o,o)-e[1],a=n*n-i;if(a<0)return null;let p=Math.sqrt(a);return[-n-p,-n+p]}function At(r){return S(r[1],r[0])}function Or(r){return[r[0],C(At(r))]}var mt=class{constructor(t=w.zero,e=w.pz){this.origin=t,this.direction=e}get raw(){return[this.origin.elements,this.direction.elements]}distanceToSphere(t){return Nr(this.raw,t.raw)}static fromRaw(t){return new mt(new w(t[0]),new w(t[1]))}static fromLine3(t){return mt.fromRaw(Or(t.raw))}};function Br([r,t],e){return[X(r,e),X(t,e)]}function Ct(r,t){return H(R(r[0],1-t),R(r[1],t))}function Qt(r,t,e){let o=S(t,r[0]),n=S(r[1],r[0]),i=T(o,n)/T(n,n);return e&&(i=B(i)),Ct(r,i)}function Hr(r,t,e){return Q(S(Qt(r,t,e),t))}var Ft=class{constructor(t=w.zero,e=w.zero){this.start=t,this.end=e}get raw(){return[this.start.elements,this.end.elements]}get ray(){return mt.fromLine3(this)}delta(){return new w(At(this.raw))}length(){return this.delta.length}at(t){return new w(Ct(this.raw,t))}applyMatrix4(t){return Ft.fromRaw(Br(this.raw,t.elements))}closestPointToPoint(t,e){return new w(Qt(this.raw,t.elements,e))}distanceToPoint(t,e){return Hr(this.raw,t.elements,e)}static fromRaw(t){return new Ft(new w(t[0]),new w(t[1]))}};function Tr(r){return r[0]*r[3]-r[2]*r[1]}function Pr(r){let t=r[0],e=r[1],o=r[2],n=r[3],i=t*n-o*e;return i===0?R(r,0):R([n,-e,-o,t],1/i)}function Et(...r){if(r.length<2)return r[0];let t=r.shift(),e=Et(...r),o=t[0],n=t[1],i=t[2],a=t[3],p=e[0],s=e[1],m=e[2],u=e[3];return[o*p+i*s,n*p+a*s,o*m+i*u,n*m+a*u]}function vr(r){return[r[0],r[2],r[1],r[3]]}var ce=[1,0,0,1],O=class{constructor(t=ce){this.elements=t}get transpose(){return new O(vr(this.elements))}get determinant(){return Tr(this.elements)}get inverse(){return new O(Pr(this.elements))}toString(){let t=this.elements.map(e=>e.toFixed(3));return`Matrix2( ${t[0]}, ${t[2]}; ${t[1]}, ${t[3]} )`}clone(){return new O(this.elements.concat())}multiply(...t){return O.multiply(this,...t)}scaleScalar(t){return new O(R(this.elements,t))}static get identity(){return new O(ce)}static multiply(...t){return t.length===0?O.identity:new O(Et(...t.map(e=>e.elements)))}};function yt(r,t){return[t[0]*r[0]+t[3]*r[1]+t[6]*r[2],t[1]*r[0]+t[4]*r[1]+t[7]*r[2],t[2]*r[0]+t[5]*r[1]+t[8]*r[2]]}function Ur([r,t],e,o){let n=C(yt(r,o)),i=R(r,-t),a=X(i,e),p=-T(a,r);return[n,p]}function Y([r,t],e){return T(r,e)+t}function G([r,t]){let e=1/Q(r);return[R(r,e),t*e]}var tt=class{get raw(){return[this.normal.elements,this.distance]}get normalized(){return tt.fromRaw(G(this.raw))}constructor(t=w.pz,e=0){this.normal=t,this.distance=e}applyMatrix4(t,e){var o;return tt.fromRaw(Ur(this.raw,t.elements,(o=e==null?void 0:e.elements)!=null?o:t.normalMatrix.elements))}distanceToPoint(t){return Y(this.raw,t.elements)}static fromRaw(t){return new tt(new w(t[0]),t[1])}};function Gr(r,t){return r.every(e=>Y(e,t)>=0)}function Xr(r){return[[[1,0,0],-r[0][0]],[[-1,0,0],r[1][0]],[[0,1,0],-r[0][1]],[[0,-1,0],r[1][1]],[[0,0,1],-r[0][2]],[[0,0,-1],r[1][2]]]}function Yr(r){let t=r[0],e=r[4],o=r[8],n=r[12],i=r[1],a=r[5],p=r[9],s=r[13],m=r[2],u=r[6],c=r[10],l=r[14],h=r[3],f=r[7],x=r[11],b=r[15];return[G([[h-t,f-e,x-o],b-n]),G([[h+t,f+e,x+o],b+n]),G([[h-i,f-a,x-p],b-s]),G([[h+i,f+a,x+p],b+s]),G([[h-m,f-u,x-c],b-l]),G([[h+m,f+u,x+c],b+l])]}function Zr(r,t){return r.every(e=>{let o=e[0].map((n,i)=>t[n>0?1:0][i]);return Y(e,o)>=0})}function Kr(r,t){return r.every(e=>Y(e,t[0])>=-t[1])}var Mt=class{get raw(){return this.planes.map(t=>t.raw)}constructor(t){this.planes=t}containPoint(t){return Gr(this.raw,t.elements)}intersectBox3(t){return Zr(this.raw,t.raw)}intersectSphere3(t){return Kr(this.raw,t.raw)}static fromRaw(t){return new Mt(t.map(e=>tt.fromRaw(e)))}static fromBox3(t){return Mt.fromRaw(Xr(t.raw))}static fromProjectionMatrix(t){return Mt.fromRaw(Yr(t.elements))}};function jr(r,t){return K(S(r[0],t))<=r[1]*r[1]}var _r=class{constructor(t=w.zero,e=0){this.origin=t,this.radius=e}get raw(){return[this.origin.elements,this.radius]}containsPoint(t){return jr(this.raw,t.elements)}static fromRaw(t){return new _r(new w(t[0]),t[1])}};function kr(r,t){let e=[r[0],r[1],r[2]],o=yt(e,t),n=r[3];return[o[0],o[1],o[2],n]}var Z=class extends nt{constructor(t=[0,0,0,0]){super();this.elements=t}get x(){return this.elements[0]}set x(t){this.elements[0]=t}get y(){return this.elements[1]}set y(t){this.elements[1]=t}get z(){return this.elements[2]}set z(t){this.elements[2]=t}get w(){return this.elements[3]}set w(t){this.elements[3]=t}toString(){return`Vector4( ${this.x.toFixed(3)}, ${this.y.toFixed(3)}, ${this.z.toFixed(3)}, ${this.w.toFixed(3)} )`}applyMatrix3(t){return new Z(kr(this.elements,t.elements))}applyMatrix4(t){return new Z(ft(this.elements,t.elements))}__new(t){return new Z(t)}static get zero(){return new Z([0,0,0,0])}static get one(){return new Z([1,1,1,1])}};function rt(r,t){return r[t[0]++]}function Lt(r,t){return rt(r,t)*256+rt(r,t)}function ro(r,t){return Lt(r,t)*65536+Lt(r,t)}function eo(r,t){let e=0;for(;;){let o=rt(r,t);if(e=e*128+(o&127),o<128)return e}}function oo(r,t){return t[0]+=8,[Lt(r,t),Lt(r,t),Lt(r,t)]}function no(r,t){t[0]+=4;let e=t[0]+ro(r,t)+4,o=[],n=0;for(;t[0]<e;){let i=eo(r,t),a=rt(r,t);n=a<128?n:a;let p=a<128?a:rt(r,t);if(n<192)o.push([i,n,p,rt(r,t)]);else if(n===255){let s=rt(r,t);if(o.push([i,n,p,q(s).map(()=>rt(r,t))]),p===47)break}else throw new Error(`${n}`)}return o}function ue(r){let t=new Uint8Array(r),e=[0],o=oo(t,e),n=[];for(;e[0]<t.length;)n.push(no(t,e));return[o,n]}var pt=["2","3","4","5","6","7","8","9","T","J","Q","K","A"];var Wr=["c","d","h","s"];function io(){let r=[];return Wr.map(t=>pt.map(e=>r.push(e+t))),r}var U={HighCard:0,OnePair:1,TwoPair:2,ThreeOfAKind:3,Straight:4,Flush:5,FullHouse:6,FourOfAKind:7,StraightFlush:8};var y={"2":0,"3":1,"4":2,"5":3,"6":4,"7":5,"8":6,"9":7,T:8,J:9,Q:10,K:11,A:12};var Vr={c:0,d:1,h:2,s:3};function z(r){return r.sort((t,e)=>Vr[t[1]]-Vr[e[1]]).sort((t,e)=>y[t[0]]-y[e[0]])}function ao(r){let t=r.concat(),e=new vt,o=new vt;t.map(s=>{let m=s[0],u=s[1];e.add(m,s),o.add(u,s)});let n=[],i=[],a=[];pt.map(s=>{let m=e.get(s);m.size>3?n.push(s):m.size>2?i.push(s):m.size>1&&a.push(s)});let p;{let s=[],m=Array.from(e.get("A"))[0];m&&s.push(m),pt.map(u=>{let c=Array.from(e.get(u))[0];c?(s.push(c),s.length>4&&(p=s)):s=[]})}if(p){for(let[s,m]of o.map)if(m.size>0){let u,c=[],l="A"+s;if(m.has(l)&&c.push(l),pt.map(f=>{let x=f+s;m.has(x)?(c.push(x),c.length>4&&(u=c)):c=[]}),u){u.splice(0,u.length-5);let f="StraightFlush",x=[U[f],y[u[4][0]]];return{hand:f,cards:u,strength:x}}}}if(n.length>0){n.sort((c,l)=>y[c]-y[l]),n.splice(0,n.length-1);let s=Array.from(e.get(n[0]));s.map(c=>t.splice(t.indexOf(c),1)),z(t).splice(0,t.length-1);let m="FourOfAKind",u=[U[m],y[n[0]],y[t[0][0]]];return t.push(...s),z(t),{hand:m,cards:t,strength:u}}if(i.length>0&&i.length+a.length>1){i.sort((c,l)=>y[c]-y[l]),a.push(...i.splice(0,i.length-1)),a.sort((c,l)=>y[c]-y[l]),a.splice(0,a.length-1);let s=Array.from(e.get(i[0]));s.push(...Array.from(e.get(a[0]))),z(s).splice(0,s.length-5);let m="FullHouse",u=[U[m],y[i[0]],y[a[0]]];return{hand:m,cards:s,strength:u}}for(let[s,m]of o.map)if(m.size>4){let u=z(Array.from(m));u.splice(0,u.length-5);let c="Flush",l=[U[c],...u.concat().reverse().map(h=>y[h[0]])];return{hand:c,cards:u,strength:l}}if(p){p.splice(0,p.length-5);let s="Straight",m=[U[s],y[p[4][0]]];return{hand:s,cards:p,strength:m}}if(i.length>0){i.sort((c,l)=>y[c]-y[l]),i.splice(0,i.length-1);let s=Array.from(e.get(i[0]));s.map(c=>t.splice(t.indexOf(c),1)),z(t).splice(0,t.length-2);let m="ThreeOfAKind",u=[U[m],y[i[0]],y[t[1][0]],y[t[0][0]]];return t.push(...s),z(t),{hand:m,cards:t,strength:u}}if(a.length>1){a.sort((c,l)=>y[c]-y[l]),a.splice(0,a.length-2);let s=Array.from(e.get(a[0]));s.push(...Array.from(e.get(a[1]))),s.map(c=>t.splice(t.indexOf(c),1)),z(t).splice(0,t.length-1);let m="TwoPair",u=[U[m],y[a[1]],y[a[0]],y[t[0][0]]];return t.push(...s),z(t),{hand:m,cards:t,strength:u}}if(a.length>0){let s=Array.from(e.get(a[0]));s.map(c=>t.splice(t.indexOf(c),1)),z(t).splice(0,t.length-3);let m="OnePair",u=[U[m],y[a[0]],y[t[2][0]],y[t[1][0]],y[t[0][0]]];return t.push(...s),z(t),{hand:m,cards:t,strength:u}}{let s="HighCard";z(t),t.splice(0,t.length-5);let m=[U[s],y[t[4][0]],y[t[3][0]],y[t[2][0]],y[t[1][0]],y[t[0][0]]];return{hand:s,cards:t,strength:m}}}var so=["HighCard","OnePair","TwoPair","ThreeOfAKind","Straight","Flush","FullHouse","FourOfAKind","StraightFlush"];function le(r,t){return ct(this,null,function*(){return yield r().catch(e=>{if(t<=1)throw e;return le(r,t-1)})})}function fe(r,t){try{return r()}catch(e){if(t<=1)throw e;return fe(r,t-1)}}function mo(r){let t=[],e=new Uint8Array(r),o=new Uint16Array(16),n=0,i=!1,a=!1;for(;;){let p=e[n++],s=(p&1)===1,m=(p>>1&1)===1,u=(p>>2&1)===1;if(m){let c=e[n++]<<8|e[n++];for(let l=0;l<16;l++)c>>15-l&1&&(o[l]=e[n++]<<8|e[n++])}if(u){let c=e[n++],l=e.subarray(n,n+2*c);n+=2*c;let h=[];for(;;){let f=e[n++];if(f===255)break;if(f===254){i=!0;break}else if(f===253){a=!0;break}let x=f>>4&15,b=f&15,d=e.subarray(n,n+b);n+=b,h.push({colorIndex:x,indices:Array.from(d)})}t.push({needsClear:s,indexedMode:u,palette:Array.from(o),vertices:Array.from(l),polygons:h})}else{let c=[];for(;;){let l=e[n++];if(l===255)break;if(l===254){i=!0;break}else if(l===253){a=!0;break}let h=l>>4&15,f=l&15,x=e.subarray(n,n+2*f);n+=2*f,c.push({colorIndex:h,vertices:Array.from(x)})}t.push({needsClear:s,indexedMode:u,palette:Array.from(o),polygons:c})}if(i&&(n=(Math.floor(n/65536)+1)*65536,i=!1),a)break}return t}function po(r,t={}){var i;let e=1/((i=t==null?void 0:t.fps)!=null?i:30),o='<svg width="256" height="200" viewBox="0 0 256 200" xmlns="http://www.w3.org/2000/svg">',n=`g{visibility:hidden;animation-duration:${(e*r.length).toFixed(3)}s;animation-iteration-count:infinite;animation-name:frame}@keyframes frame{0%{visibility:visible}${200/r.length}%{visibility:hidden}}`;return r.map((a,p)=>{let{indexedMode:s,palette:m,polygons:u}=a;n+=`#f${p}{animation-delay:${(e*p).toFixed(3)}s}`;let c=m.map(b=>{let d=Cr(b);return Qr(d)}),l='<rect width="256" height="200" fill="#000" />',h=-1,f="";if(s){let{vertices:b}=a;u.map(({colorIndex:d,indices:M})=>{if(h!==d){if(h!==-1){let g=c[h];l+=`<path d="${f}" fill="${g}" />`}h=d,f=""}for(let g=0;g<M.length;g++){let k=M[g],_=b[2*k],A=b[2*k+1];f+=g===0?`M${_},${A}`:`L${_},${A}`}})}else u.map(({colorIndex:b,vertices:d})=>{if(h!==b){if(h!==-1){let M=c[h];l+=`<path d="${f}" fill="${M}" />`}h=b,f=""}for(let M=0;M<d.length;M+=2){let g=d[M],k=d[M+1];f+=M===0?`M${g},${k}`:`L${g},${k}`}});let x=c[h];l+=`<path d="${f}" fill="${x}" />`,o+=`<g id="f${p}">${l}</g>`}),o+=`<style>${n}</style></svg>`,o}var he=class{constructor(){this.smoothTime=1;this.velocity=0;this.value=0;this.target=0}update(t){let e=2/this.smoothTime,o=e*t,n=1/(1+o+.48*o*o+.235*o*o*o),i=this.value-this.target,a=(this.velocity+e*i)*t;return this.velocity=(this.velocity-e*a)*n,this.value=this.target+(i+a)*n,this.value}};var we=class{constructor(t,e){this.i=t,this.o=e}swap(){let t=this.i;this.i=this.o,this.o=t}};var xe=class{constructor(){this.__bpm=0;this.__lastTap=0;this.__lastBeat=0;this.__lastTime=0;this.__calc=new Ht(16)}get beatDuration(){return 60/this.__bpm}get bpm(){return this.__bpm}set bpm(t){this.__lastBeat=this.beat,this.__lastTime=performance.now(),this.__bpm=t}get beat(){return this.__lastBeat+(performance.now()-this.__lastTime)*.001/this.beatDuration}reset(){this.__calc.reset()}nudge(t){this.__lastBeat=this.beat+t,this.__lastTime=performance.now()}tap(){let t=performance.now(),e=(t-this.__lastTap)*.001;2<e?this.reset():(this.__calc.push(e),this.__bpm=60/this.__calc.mean),this.__lastTap=t,this.__lastTime=t,this.__lastBeat=0}};function be(r,t={}){var h,f,x,b;let e=(h=t.poly)!=null?h:8,o=(f=t.blockSize)!=null?f:128,n=(x=t.sampleRate)!=null?x:48e3,i=(b=t.stepsPerSecond)!=null?b:1,a=0,p=0,s,m=q(e).fill(-1),u=q(e).fill(-1/0),c=q(e).fill(-1/0),l=0;return()=>{let d=q(e).map(()=>new Float32Array(4*o));return q(o).map(M=>{let g=a/n;if(g*i>=l){let _=r[p],A=r[p+1];s=(p===0?60:s)+_&127;let v=m.indexOf(s),E=1/0;v===-1&&u.map((L,I)=>{let D=c[I];L<=D&&D<E&&(v=I,E=D)}),v===-1&&u.map((L,I)=>{L<E&&(v=I,E=L)}),m[v]=s,_&128?c[v]<u[v]&&(c[v]=g):c[v]>=u[v]&&(u[v]=g),l+=A,p=(p+2)%r.length}a++,q(e).map(_=>{let A=u[_],v=c[_];d[_][4*M+0]=g-A,d[_][4*M+1]=v<A?0:g-v,d[_][4*M+2]=m[_],d[_][4*M+3]=0})}),d}}function Re(r,t={}){var c,l,h;let e=(c=t.blockSize)!=null?c:128,o=(l=t.sampleRate)!=null?l:48e3,n=(h=t.stepsPerSecond)!=null?h:960,i=0,a=0,p,s=-1/0,m=-1/0,u=0;return()=>new Float32Array(q(e).map(()=>{let f=i/o;if(f*n>=u){let b=r[a],d=r[a+1];p=(a===0?60:p)+b&127,b&128?m<s&&(m=f):m>=s&&(s=f),u+=d,a=(a+2)%r.length}return i++,[f-s,m<s?0:f-m,p,0]}).flat())}function de(r,{track:t,tickMultiplier:e}={}){let o=[],n=60,i=0,a=r[1][t!=null?t:0];return q(a.length+1).map(p=>{var h,f,x,b,d,M;if(i+=((f=(h=a[p])==null?void 0:h[0])!=null?f:0)*(e!=null?e:1),i===0&&p===0)return;let s=(b=(x=a[p-1])==null?void 0:x[1])!=null?b:128,m=(M=(d=a[p-1])==null?void 0:d[2])!=null?M:60;if(s>=160)return;let u=m-n+128&127;n=m;let c=s<144?128:0,l=Math.floor(Math.min(i,240));for(o.push(u+c,l),i-=l;i>=1;)l=Math.floor(Math.min(i,240)),o.push(c,l),i-=l}),new Uint8Array(o)}var ye=class{constructor(t){this.seed=t||1}gen(t){return t&&(this.seed=t),this.seed=this.seed^this.seed<<13,this.seed=this.seed^this.seed>>>17,this.seed=this.seed^this.seed<<5,this.seed/Math.pow(2,32)+.5}set(t){this.seed=t||this.seed||1}};function Me(r,t,e=.5){if(t>=1)return r;if(t<0)return"";let o=ot(0,1-e,t),n=ot(e,1,t),i=1+Math.floor(o*(r.length-1)),a=t<e?0:1+Math.floor(n*(r.length-1)),p=i-a,s=[...Array(p)].map(()=>String.fromCharCode(33+Math.floor(93*Math.random()))).join("");return r.substring(0,a)+s}var Sr=class{static defaultComparator(t,e){let o=`${t}`,n=`${e}`;return o>n?1:o<n?-1:0}get length(){return this.array.length}get isEmpty(){return this.array.length===0}get root(){return this.array[0]}constructor(t,e){if(this.array=[],this.elementIndexMap=new Map,this.comparator=e!=null?e:Sr.defaultComparator,t!=null)for(let o of t)this.push(o)}push(...t){t.map(e=>{let o=this.length;this.array.push(e),this.elementIndexMap.set(e,o),this.__up(o,e)})}pop(){if(this.isEmpty)return null;let t=this.array[0];if(this.elementIndexMap.delete(t),this.length===1)this.array.splice(0);else{let e=this.array.pop();this.__down(0,e)}return t}delete(t){this.elementIndexMap.delete(this.array[t]);let e=this.array.pop();return e!=null&&(t=this.__up(t,e),t=this.__down(t,e)),!0}replace(t,e){return t!=null&&(this.elementIndexMap.delete(this.array[t]),t=this.__up(t,e),t=this.__down(t,e)),t!=null?t:null}__up(t,e){let o=t;for(;o!==0;){let n=o-1>>1,i=this.array[n];if(this.comparator(e,i)<0)this.array[o]=i,this.elementIndexMap.set(i,o),o=n;else break}return this.array[o]=e,this.elementIndexMap.set(e,o),o}__down(t,e){let o=t;for(;(o<<1)+1<this.length;){let n=(o<<1)+1,i=(o<<1)+2;if(i<this.length){let a=this.array[n],p=this.array[i],s=this.comparator(a,p)<0,m=s?a:p,u=s?n:i;if(this.comparator(m,e)<0)this.array[o]=m,this.elementIndexMap.set(m,o),o=u;else break}else if(this.comparator(this.array[n],e)<0)this.array[o]=this.array[n],this.elementIndexMap.set(this.array[o],o),o=n;else break}return this.array[o]=e,this.elementIndexMap.set(e,o),o}};function ge(r,t){let e;return()=>{e&&clearTimeout(e),e=setTimeout(()=>{r(),e=null},t)}}function Te(r,t){for(let e of r)e(t)}function Pe(r,t){let e=!1,o=-1/0;return()=>{let n=Date.now(),i=Math.max(0,o+t-n);e||(setTimeout(()=>{o=Date.now(),r(),e=!1},i),e=!0)}}module.exports=Ce(co);
/*!
 * Turbo colormap
 *
 * Copyright 2019 Google LLC. (Apache-2.0)
 *
 * https://gist.github.com/mikhailov-work/0d177465a8151eb6ede1768d51d476c7
 */
//# sourceMappingURL=0b5vr-experimental.cjs.min.js.map
