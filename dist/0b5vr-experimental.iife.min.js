// (c) 2019-2022 0b5vr - https://github.com/0b5vr/experimental-npm/blob/release/LICENSE
var OBSVR_EXPERIMENTAL=(()=>{var Wt=Object.defineProperty;var gr=Object.getOwnPropertyDescriptor;var kr=Object.getOwnPropertyNames;var Tr=Object.prototype.hasOwnProperty;var Pr=r=>Wt(r,"__esModule",{value:!0});var vr=(r,t)=>{for(var e in t)Wt(r,e,{get:t[e],enumerable:!0})},Vr=(r,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of kr(t))!Tr.call(r,n)&&(e||n!=="default")&&Wt(r,n,{get:()=>t[n],enumerable:!(o=gr(t,n))||o.enumerable});return r};var Sr=(r=>(t,e)=>r&&r.get(t)||(e=Vr(Pr({}),t,1),r&&r.set(t,e),e))(typeof WeakMap!="undefined"?new WeakMap:0);var Mt=(r,t,e)=>new Promise((o,n)=>{var a=i=>{try{u(e.next(i))}catch(m){n(m)}},s=i=>{try{u(e.throw(i))}catch(m){n(m)}},u=i=>i.done?o(i.value):Promise.resolve(i.value).then(a,s);u((e=e.apply(r,t)).next())});var jr={};vr(jr,{CDS:()=>sr,Clock:()=>tt,ClockFrame:()=>mr,ClockRealtime:()=>cr,Euler:()=>W,ExpSmooth:()=>pr,GPUTimer:()=>tr,HistoryMeanCalculator:()=>Tt,HistoryMedianCalculator:()=>lr,HistoryPercentileCalculator:()=>Pt,MapOfSet:()=>ut,Matrix3:()=>P,Matrix4:()=>R,Pool:()=>kt,Quaternion:()=>M,Swap:()=>dr,TRIANGLE_STRIP_QUAD:()=>Fr,TRIANGLE_STRIP_QUAD_3D:()=>Er,TRIANGLE_STRIP_QUAD_NORMAL:()=>Lr,TRIANGLE_STRIP_QUAD_UV:()=>qr,TapTempo:()=>Mr,Vector:()=>Z,Vector3:()=>d,Vector4:()=>X,Xorshift:()=>_r,arraySetAdd:()=>Qr,arraySetDelete:()=>ir,arraySetDiff:()=>Ar,arraySetHas:()=>ar,arraySetUnion:()=>Cr,binarySearch:()=>ct,clamp:()=>_t,colorToHex:()=>Gr,createPokerDeck:()=>Yr,edt1d:()=>gt,edt2d:()=>ur,eotfRec709:()=>Xr,eulerFromMat3:()=>j,eulerFromMat4:()=>er,eulerFromQuaternion:()=>or,evaluatePokerHand:()=>Zr,getYugopText:()=>yr,lerp:()=>Jt,linearstep:()=>Y,mat3Determinant:()=>vt,mat3FromMat4:()=>N,mat3FromMat4Transpose:()=>Rr,mat3FromQuaternion:()=>rt,mat3Inverse:()=>Vt,mat3Multiply:()=>pt,mat3Transpose:()=>St,mat4Compose:()=>Ft,mat4Decompose:()=>Lt,mat4Determinant:()=>st,mat4FromMat3:()=>qt,mat4FromQuaternion:()=>G,mat4Inverse:()=>It,mat4LookAt:()=>zt,mat4LookAtInverse:()=>Ot,mat4Multiply:()=>ft,mat4Perspective:()=>$t,mat4RotateX:()=>Dt,mat4RotateY:()=>Ht,mat4RotateZ:()=>Nt,mat4Scale:()=>Bt,mat4ScaleScalar:()=>Gt,mat4Translate:()=>Xt,mat4Transpose:()=>Ut,matrix2d:()=>Or,matrix3d:()=>$r,mod:()=>rr,oetfRec709:()=>Ur,pokerHandStrengthMap:()=>$,pokerHandsByStrength:()=>Kr,pokerRankStrengthMap:()=>f,pokerRanksByStrength:()=>J,pokerSuitIndexMap:()=>jt,pokerSuitsByIndex:()=>nr,quatFromAxisAngle:()=>Yt,quatFromEuler:()=>Kt,quatFromMatrix3:()=>Et,quatFromMatrix4:()=>mt,quatInverse:()=>it,quatMultiply:()=>K,quatNormalize:()=>Zt,range:()=>Dr,sanitizeAngle:()=>ht,saturate:()=>yt,shuffleArray:()=>Ir,smootherstep:()=>Nr,smootheststep:()=>Br,smoothstep:()=>Hr,sortPokerCardsByRank:()=>C,triIndexToLineIndex:()=>zr,vec3ApplyMatrix4:()=>Ct,vec3ApplyQuaternion:()=>At,vec3Cross:()=>Q,vec3OrthoNormalize:()=>at,vec4ApplyMatrix4:()=>nt,vecAdd:()=>H,vecDivide:()=>Qt,vecDot:()=>V,vecLength:()=>S,vecLengthSq:()=>et,vecManhattanLength:()=>ot,vecMultiply:()=>lt,vecNeg:()=>B,vecNormalize:()=>v,vecScale:()=>w,vecSub:()=>D});function ct(r,t){if(typeof t!="function")return ct(r,a=>a<t);let e=t,o=0,n=r.length;for(;o<n;){let a=o+n>>1,s=r[a];e(s)?o=a+1:n=a}return o}function ir(r,t){let e=r.indexOf(t);return e===-1?!1:(r.splice(e,1),!0)}function ar(r,t){return r.indexOf(t)!==-1}function Qr(r,t){return r.indexOf(t)!==-1?!1:(r.push(t),!0)}function Cr(r,t){let e=[...r];return t.forEach(o=>{ar(e,o)||e.push(o)}),e}function Ar(r,t){let e=[...r];return t.forEach(o=>{ir(e,o)}),e}var Fr=[-1,-1,1,-1,-1,1,1,1],Er=[-1,-1,0,1,-1,0,-1,1,0,1,1,0],Lr=[0,0,1,0,0,1,0,0,1,0,0,1],qr=[0,0,1,0,0,1,1,1];function Ir(r,t){let e=t||(()=>Math.random());for(let o=0;o<r.length-1;o++){let n=o+Math.floor(e()*(r.length-o)),a=r[n];r[n]=r[o],r[o]=a}return r}function zr(r){let t=[];for(let e=0;e<r.length/3;e++){let o=e*3;t.push(r[o],r[o+1],r[o+1],r[o+2],r[o+2],r[o])}return t}function Or(r,t){let e=[];for(let o=0;o<t;o++)for(let n=0;n<r;n++)e.push(n,o);return e}function $r(r,t,e){let o=[];for(let n=0;n<e;n++)for(let a=0;a<t;a++)for(let s=0;s<r;s++)o.push(s,a,n);return o}var sr=class{constructor(){this.factor=100;this.ratio=1;this.velocity=0;this.value=0;this.target=0}update(t){return this.velocity+=(-this.factor*(this.value-this.target)-2*this.velocity*Math.sqrt(this.factor)*this.ratio)*t,this.value+=this.velocity*t,this.value}};var tt=class{constructor(){this.__time=0;this.__deltaTime=0;this.__isPlaying=!1}get time(){return this.__time}get deltaTime(){return this.__deltaTime}get isPlaying(){return this.__isPlaying}update(t){let e=this.__time;this.__time=t||0,this.__deltaTime=this.__time-e}play(){this.__isPlaying=!0}pause(){this.__isPlaying=!1}setTime(t){this.__time=t}};var mr=class extends tt{constructor(t=60){super();this.__frame=0;this.__fps=t}get frame(){return this.__frame}get fps(){return this.__fps}update(){this.__isPlaying?(this.__time=this.__frame/this.__fps,this.__deltaTime=1/this.__fps,this.__frame++):this.__deltaTime=0}setTime(t){this.__frame=Math.floor(this.__fps*t),this.__time=this.__frame/this.__fps}};var cr=class extends tt{constructor(){super(...arguments);this.__rtTime=0;this.__rtDate=performance.now()}get isRealtime(){return!0}update(){let t=performance.now();if(this.__isPlaying){let e=this.__time,o=t-this.__rtDate;this.__time=this.__rtTime+o/1e3,this.__deltaTime=this.time-e}else this.__rtTime=this.time,this.__rtDate=t,this.__deltaTime=0}setTime(t){this.__time=t,this.__rtTime=this.time,this.__rtDate=performance.now()}};function Jt(r,t,e){return r+(t-r)*e}function _t(r,t,e){return Math.min(Math.max(r,t),e)}function yt(r){return _t(r,0,1)}function Dr(r,t,e,o,n){return(r-t)*(n-o)/(e-t)+o}function Y(r,t,e){return yt((e-r)/(t-r))}function Hr(r,t,e){let o=Y(r,t,e);return o*o*(3-2*o)}function Nr(r,t,e){let o=Y(r,t,e);return o*o*o*(o*(o*6-15)+10)}function Br(r,t,e){let o=Y(r,t,e);return o*o*o*o*(o*(o*(-20*o+70)-84)+35)}function Gr(r){return"#"+r.map(t=>("0"+Math.round(yt(t)*255).toString(16)).slice(-2)).join("")}function Xr(r){return r.map(t=>t<.081?t/4.5:Math.pow((t+.099)/1.099,1/.45))}function Ur(r){return r.map(t=>t<.018?4.5*t:1.099*Math.pow(t,.45)-.099)}function gt(r,t,e,o){let n=0,a=new Float32Array(o);a[0]=0;let s=new Float32Array(o+1);s[0]=-1/0,s[1]=1/0;let u=new Float32Array(o);for(let i=0;i<o;i++)u[i]=r[t+i*e];for(let i=1;i<o;i++){let m=0;for(;0<=n&&(m=(u[i]+i*i-u[a[n]]-a[n]*a[n])/(2*i-2*a[n]),m<=s[n]);)n--;n++,a[n]=i,s[n]=m,s[n+1]=1/0}n=0;for(let i=0;i<o;i++){for(;s[n+1]<i;)n++;let m=i-a[n];r[t+i*e]=u[a[n]]+m*m}}function ur(r,t,e){for(let o=0;o<t;o++)gt(r,o,t,e);for(let o=0;o<e;o++)gt(r,o*t,1,t)}var pr=class{constructor(){this.factor=10;this.target=0;this.value=0}update(t){return this.value=Jt(this.target,this.value,Math.exp(-this.factor*t)),this.value}};var kt=class{constructor(t){this.index=0;this.array=t}get current(){return this.array[this.index]}next(){return this.index=(this.index+1)%this.array.length,this.current}};var tr=class{static isSupported(t){return new Set(t.getSupportedExtensions()).has("EXT_disjoint_timer_query_webgl2")}constructor(t){this.gl=t;let e=new Array(1024).fill(1).map(()=>t.createQuery());this.queries=new kt(e),this.stack=[],this.ext=t.getExtension("EXT_disjoint_timer_query_webgl2"),this.__loopTasks=new Set;let o=()=>{this.update(),requestAnimationFrame(o)};o()}update(){Array.from(this.__loopTasks).forEach(t=>t())}measure(t){return Mt(this,null,function*(){let{gl:e}=this;if(this.stack.length!==0){e.endQuery(this.ext.TIME_ELAPSED_EXT);let a=this.check(this.queries.current);this.stack=this.stack.map(s=>Mt(this,null,function*(){return(yield s)+(yield a)}))}this.stack.push(Promise.resolve(0)),e.beginQuery(this.ext.TIME_ELAPSED_EXT,this.queries.next()),t(),e.endQuery(this.ext.TIME_ELAPSED_EXT);let o=this.stack.pop(),n=this.check(this.queries.current);return this.stack.length!==0&&(this.stack=this.stack.map(a=>Mt(this,null,function*(){return(yield a)+(yield n)})),e.beginQuery(this.ext.TIME_ELAPSED_EXT,this.queries.next())),(yield o)+(yield n)})}check(t){let{gl:e}=this;return new Promise(o=>{let n=()=>{e.getQueryParameter(t,e.QUERY_RESULT_AVAILABLE)&&(this.__loopTasks.delete(n),o(e.getQueryParameter(t,e.QUERY_RESULT)*.001*.001))};this.__loopTasks.add(n)})}};var Tt=class{constructor(t){this.__recalcForEach=0;this.__countUntilRecalc=0;this.__history=[];this.__index=0;this.__count=0;this.__cache=0;this.__length=t,this.__recalcForEach=t;for(let e=0;e<t;e++)this.__history[e]=0}get mean(){let t=Math.min(this.__count,this.__length);return t===0?0:this.__cache/t}get recalcForEach(){return this.__recalcForEach}set recalcForEach(t){let e=t-this.__recalcForEach;this.__recalcForEach=t,this.__countUntilRecalc=Math.max(0,this.__countUntilRecalc+e)}reset(){this.__index=0,this.__count=0,this.__cache=0,this.__countUntilRecalc=0;for(let t=0;t<this.__length;t++)this.__history[t]=0}push(t){let e=this.__history[this.__index];this.__history[this.__index]=t,this.__count++,this.__index=(this.__index+1)%this.__length,this.__countUntilRecalc===0?this.recalc():(this.__countUntilRecalc--,this.__cache-=e,this.__cache+=t)}recalc(){this.__countUntilRecalc=this.__recalcForEach;let t=this.__history.slice(0,Math.min(this.__count,this.__length)).reduce((e,o)=>e+o,0);this.__cache=t}};var Pt=class{constructor(t){this.__history=[];this.__sorted=[];this.__index=0;this.__length=t}get median(){return this.percentile(50)}percentile(t){return this.__history.length===0?0:this.__sorted[Math.round(t*.01*(this.__history.length-1))]}reset(){this.__index=0,this.__history=[],this.__sorted=[]}push(t){let e=this.__history[this.__index];if(this.__history[this.__index]=t,this.__index=(this.__index+1)%this.__length,this.__sorted.length===this.__length){let n=ct(this.__sorted,e);this.__sorted.splice(n,1)}let o=ct(this.__sorted,t);this.__sorted.splice(o,0,t)}};var lr=class extends Pt{constructor(t){super(t);console.warn("HistoryMedianCalculator: Deprecated. Use HistoryPercentileCalculator instead")}};var ut=class{constructor(){this.map=new Map}get(t){var e;return(e=this.map.get(t))!=null?e:new Set}add(t,e){let o=this.map.get(t);o==null&&(o=new Set,this.map.set(t,o)),o.add(e)}};function vt(r){let t=r[0],e=r[1],o=r[2],n=r[3],a=r[4],s=r[5],u=r[6],i=r[7],m=r[8],p=m*a-s*i,c=s*u-m*n,l=i*n-a*u;return t*p+e*c+o*l}function N(r){return[r[0],r[1],r[2],r[4],r[5],r[6],r[8],r[9],r[10]]}function rt(r){let t=r[0],e=r[1],o=r[2],n=r[3];return[1-2*e*e-2*o*o,2*t*e+2*o*n,2*t*o-2*e*n,2*t*e-2*o*n,1-2*t*t-2*o*o,2*e*o+2*t*n,2*t*o+2*e*n,2*e*o-2*t*n,1-2*t*t-2*e*e]}function w(r,t){return r.map(e=>e*t)}function Vt(r){let t=r[0],e=r[1],o=r[2],n=r[3],a=r[4],s=r[5],u=r[6],i=r[7],m=r[8],p=m*a-s*i,c=s*u-m*n,l=i*n-a*u,h=t*p+e*c+o*l;return h===0?w(r,0):w([p,o*i-m*e,s*e-o*a,c,m*t-o*u,o*n-s*t,l,e*u-i*t,a*t-e*n],1/h)}function pt(...r){if(r.length<2)return r[0];let t=r.shift(),e=pt(...r),o=t[0],n=t[1],a=t[2],s=t[3],u=t[4],i=t[5],m=t[6],p=t[7],c=t[8],l=e[0],h=e[1],x=e[2],b=e[3],_=e[4],y=e[5],g=e[6],k=e[7],T=e[8];return[o*l+s*h+m*x,n*l+u*h+p*x,a*l+i*h+c*x,o*b+s*_+m*y,n*b+u*_+p*y,a*b+i*_+c*y,o*g+s*k+m*T,n*g+u*k+p*T,a*g+i*k+c*T]}function St(r){return[r[0],r[3],r[6],r[1],r[4],r[7],r[2],r[5],r[8]]}var fr=[1,0,0,0,1,0,0,0,1],P=class{constructor(t=fr){this.elements=t}get transpose(){return new P(St(this.elements))}get determinant(){return vt(this.elements)}get inverse(){return new P(Vt(this.elements))}get matrix4(){return R.fromMatrix3(this)}toString(){let t=this.elements.map(e=>e.toFixed(3));return`Matrix3( ${t[0]}, ${t[3]}, ${t[6]}; ${t[1]}, ${t[4]}, ${t[7]}; ${t[2]}, ${t[5]}, ${t[8]} )`}clone(){return new P(this.elements.concat())}multiply(...t){return P.multiply(this,...t)}scaleScalar(t){return new P(w(this.elements,t))}static get identity(){return new P(fr)}static multiply(...t){return t.length===0?P.identity:new P(pt(...t.map(e=>e.elements)))}static fromMatrix4(t){return new P(N(t.elements))}static fromQuaternion(t){return new P(rt(t.elements))}};function H(...r){if(r.length<2)return r[0];let t=r.shift(),e=H(...r);return t.map((o,n)=>o+e[n])}function Qt(r,t){return r.map((e,o)=>e/t[o])}function V(r,t){return r.reduce((e,o,n)=>e+o*t[n],0)}function S(r){return Math.sqrt(r.reduce((t,e)=>t+e*e,0))}function et(r){return r.reduce((t,e)=>t+e*e,0)}function ot(r){return r.reduce((t,e)=>t+Math.abs(e),0)}function lt(...r){if(r.length<2)return r[0];let t=r.shift(),e=lt(...r);return t.map((o,n)=>o*e[n])}function B(r){return r.map(t=>-t)}function v(r){let t=S(r),e=t===0?0:1/t;return w(r,e)}function D(r,t){return r.map((e,o)=>e-t[o])}var Z=class{get length(){return S(this.elements)}get lengthSq(){return et(this.elements)}get manhattanLength(){return ot(this.elements)}get normalized(){return this.__new(v(this.elements))}get negated(){return this.__new(B(this.elements))}clone(){return this.__new(this.elements.concat())}add(...t){return this.__new(H(this.elements,...t.map(e=>e.elements)))}sub(t){return this.__new(D(this.elements,t.elements))}multiply(...t){return this.__new(lt(this.elements,...t.map(e=>e.elements)))}divide(t){return this.__new(Qt(this.elements,t.elements))}scale(t){return this.__new(w(this.elements,t))}dot(t){return V(this.elements,t.elements)}};function nt(r,t){return[t[0]*r[0]+t[4]*r[1]+t[8]*r[2]+t[12]*r[3],t[1]*r[0]+t[5]*r[1]+t[9]*r[2]+t[13]*r[3],t[2]*r[0]+t[6]*r[1]+t[10]*r[2]+t[14]*r[3],t[3]*r[0]+t[7]*r[1]+t[11]*r[2]+t[15]*r[3]]}function Ct(r,t){let e=nt([...r,1],t),o=[e[0],e[1],e[2]],n=e[3];return w(o,1/n)}function it(r){return[-r[0],-r[1],-r[2],r[3]]}function K(...r){if(r.length<2)return r[0];let t=r.shift(),e=K(...r);return[t[3]*e[0]+t[0]*e[3]+t[1]*e[2]-t[2]*e[1],t[3]*e[1]-t[0]*e[2]+t[1]*e[3]+t[2]*e[0],t[3]*e[2]+t[0]*e[1]-t[1]*e[0]+t[2]*e[3],t[3]*e[3]-t[0]*e[0]-t[1]*e[1]-t[2]*e[2]]}function At(r,t){let e=[...r,0],o=it(t),n=K(t,e,o);return n.pop(),n}function Q(r,t){return[r[1]*t[2]-r[2]*t[1],r[2]*t[0]-r[0]*t[2],r[0]*t[1]-r[1]*t[0]]}function at(r,t=[0,1,0],e){let o=v(r),n=v(t),a=V(o,n);a===1&&(Math.abs(o[1])>Math.abs(o[2])?n=[0,0,1]:n=[0,1,0],a=V(o,n)),n=v(D(n,w(o,a)));let s=Q(n,o);return e&&V(s,e)<0&&(s=B(s)),{normal:o,tangent:n,binormal:s}}var d=class extends Z{constructor(t=[0,0,0]){super();this.elements=t}get x(){return this.elements[0]}set x(t){this.elements[0]=t}get y(){return this.elements[1]}set y(t){this.elements[1]=t}get z(){return this.elements[2]}set z(t){this.elements[2]=t}toString(){return`Vector3( ${this.x.toFixed(3)}, ${this.y.toFixed(3)}, ${this.z.toFixed(3)} )`}cross(t){return new d(Q(this.elements,t.elements))}applyQuaternion(t){return new d(At(this.elements,t.elements))}applyMatrix4(t){return new d(Ct(this.elements,t.elements))}__new(t){return new d(t)}static get zero(){return new d([0,0,0])}static get one(){return new d([1,1,1])}static orthoNormalize(t,e,o){let n=at(t.elements,e.elements,o.elements);return{normal:new d(n.normal),tangent:new d(n.tangent),binormal:new d(n.binormal)}}};function G(r){let t=r[0],e=r[1],o=r[2],n=r[3];return[1-2*e*e-2*o*o,2*t*e+2*o*n,2*t*o-2*e*n,0,2*t*e-2*o*n,1-2*t*t-2*o*o,2*e*o+2*t*n,0,2*t*o+2*e*n,2*e*o-2*t*n,1-2*t*t-2*e*e,0,0,0,0,1]}function Ft(r,t,e){let o=G(t),n=e[0],a=e[1],s=e[2];return[o[0]*n,o[1]*n,o[2]*n,0,o[4]*a,o[5]*a,o[6]*a,0,o[8]*s,o[9]*s,o[10]*s,0,r[0],r[1],r[2],1]}function st(r){let t=r[0],e=r[1],o=r[2],n=r[3],a=r[4],s=r[5],u=r[6],i=r[7],m=r[8],p=r[9],c=r[10],l=r[11],h=r[12],x=r[13],b=r[14],_=r[15],y=t*s-e*a,g=t*u-o*a,k=t*i-n*a,T=e*u-o*s,A=e*i-n*s,F=o*i-n*u,E=m*x-p*h,L=m*b-c*h,q=m*_-l*h,I=p*b-c*x,z=p*_-l*x,O=c*_-l*b;return y*O-g*z+k*I+T*q-A*L+F*E}function Et(r){let t=r[0],e=r[3],o=r[6],n=r[1],a=r[4],s=r[7],u=r[2],i=r[5],m=r[8],p=t+a+m;if(p>0){let c=.5/Math.sqrt(p+1);return[(i-s)*c,(o-u)*c,(n-e)*c,.25/c]}else if(t>a&&t>m){let c=2*Math.sqrt(1+t-a-m);return[.25*c,(e+n)/c,(o+u)/c,(i-s)/c]}else if(a>m){let c=2*Math.sqrt(1+a-t-m);return[(e+n)/c,.25*c,(s+i)/c,(o-u)/c]}else{let c=2*Math.sqrt(1+m-t-a);return[(o+u)/c,(s+i)/c,.25*c,(n-e)/c]}}function mt(r){return Et(N(r))}function Lt(r){let t=S([r[0],r[1],r[2]]),e=S([r[4],r[5],r[6]]),o=S([r[8],r[9],r[10]]);st(r)<0&&(t=-t);let a=1/t,s=1/e,u=1/o,i=r.concat();return i[0]*=a,i[1]*=a,i[2]*=a,i[4]*=s,i[5]*=s,i[6]*=s,i[8]*=u,i[9]*=u,i[10]*=u,{position:[r[12],r[13],r[14]],scale:[t,e,o],rotation:mt(i)}}function qt(r){return[r[0],r[1],r[2],0,r[3],r[4],r[5],0,r[6],r[7],r[8],0,0,0,0,1]}function It(r){let t=r[0],e=r[1],o=r[2],n=r[3],a=r[4],s=r[5],u=r[6],i=r[7],m=r[8],p=r[9],c=r[10],l=r[11],h=r[12],x=r[13],b=r[14],_=r[15],y=t*s-e*a,g=t*u-o*a,k=t*i-n*a,T=e*u-o*s,A=e*i-n*s,F=o*i-n*u,E=m*x-p*h,L=m*b-c*h,q=m*_-l*h,I=p*b-c*x,z=p*_-l*x,O=c*_-l*b,U=y*O-g*z+k*I+T*q-A*L+F*E;return U===0?w(r,0):w([s*O-u*z+i*I,o*z-e*O-n*I,x*F-b*A+_*T,c*A-p*F-l*T,u*q-a*O-i*L,t*O-o*q+n*L,b*k-h*F-_*g,m*F-c*k+l*g,a*z-s*q+i*E,e*q-t*z-n*E,h*A-x*k+_*y,p*k-m*A-l*y,s*L-a*I-u*E,t*I-e*L+o*E,x*g-h*T-b*y,m*T-p*g+c*y],1/U)}function zt(r,t=[0,0,0],e=[0,1,0],o=0){let n=v(D(r,t)),a=v(Q(e,n));o!==0&&(a=H(w(a,Math.cos(o)),w(Q(n,a),Math.sin(o))));let s=Q(n,a);return[a[0],a[1],a[2],0,s[0],s[1],s[2],0,n[0],n[1],n[2],0,r[0],r[1],r[2],1]}function Ot(r,t=[0,0,0],e=[0,1,0],o=0){let n=v(D(r,t)),a=v(Q(e,n));o!==0&&(a=H(w(a,Math.cos(o)),w(Q(n,a),Math.sin(o))));let s=Q(n,a);return[a[0],s[0],n[0],0,a[1],s[1],n[1],0,a[2],s[2],n[2],0,-V(a,r),-V(s,r),-V(n,r),1]}function ft(...r){if(r.length<2)return r[0];let t=r.shift(),e=ft(...r),o=t[0],n=t[1],a=t[2],s=t[3],u=t[4],i=t[5],m=t[6],p=t[7],c=t[8],l=t[9],h=t[10],x=t[11],b=t[12],_=t[13],y=t[14],g=t[15],k=e[0],T=e[1],A=e[2],F=e[3],E=e[4],L=e[5],q=e[6],I=e[7],z=e[8],O=e[9],U=e[10],xt=e[11],bt=e[12],wt=e[13],Rt=e[14],dt=e[15];return[o*k+u*T+c*A+b*F,n*k+i*T+l*A+_*F,a*k+m*T+h*A+y*F,s*k+p*T+x*A+g*F,o*E+u*L+c*q+b*I,n*E+i*L+l*q+_*I,a*E+m*L+h*q+y*I,s*E+p*L+x*q+g*I,o*z+u*O+c*U+b*xt,n*z+i*O+l*U+_*xt,a*z+m*O+h*U+y*xt,s*z+p*O+x*U+g*xt,o*bt+u*wt+c*Rt+b*dt,n*bt+i*wt+l*Rt+_*dt,a*bt+m*wt+h*Rt+y*dt,s*bt+p*wt+x*Rt+g*dt]}function $t(r=45,t=.01,e=100){let o=1/Math.tan(r*Math.PI/360),n=e-t;return[o,0,0,0,0,o,0,0,0,0,-(e+t)/n,-1,0,0,-2*e*t/n,0]}function Dt(r){let t=Math.cos(r),e=Math.sin(r);return[1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1]}function Ht(r){let t=Math.cos(r),e=Math.sin(r);return[t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1]}function Nt(r){let t=Math.cos(r),e=Math.sin(r);return[t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1]}function Bt(r){return[r[0],0,0,0,0,r[1],0,0,0,0,r[2],0,0,0,0,1]}function Gt(r){return[r,0,0,0,0,r,0,0,0,0,r,0,0,0,0,1]}function Xt(r){return[1,0,0,0,0,1,0,0,0,0,1,0,r[0],r[1],r[2],1]}function Ut(r){return[r[0],r[4],r[8],r[12],r[1],r[5],r[9],r[13],r[2],r[6],r[10],r[14],r[3],r[7],r[11],r[15]]}var hr=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],R=class{constructor(t=hr){this.elements=t}get transpose(){return new R(Ut(this.elements))}get determinant(){return st(this.elements)}get inverse(){return new R(It(this.elements))}get matrix3(){return P.fromMatrix4(this)}toString(){let t=this.elements.map(e=>e.toFixed(3));return`Matrix4( ${t[0]}, ${t[4]}, ${t[8]}, ${t[12]}; ${t[1]}, ${t[5]}, ${t[9]}, ${t[13]}; ${t[2]}, ${t[6]}, ${t[10]}, ${t[14]}; ${t[3]}, ${t[7]}, ${t[11]}, ${t[15]} )`}clone(){return new R(this.elements.concat())}multiply(...t){return R.multiply(this,...t)}scaleScalar(t){return new R(w(this.elements,t))}decompose(){let{position:t,scale:e,rotation:o}=Lt(this.elements);return{position:new d(t),scale:new d(e),rotation:new M(o)}}static get identity(){return new R(hr)}static multiply(...t){return t.length===0?R.identity:new R(ft(...t.map(e=>e.elements)))}static fromQuaternion(t){return new R(G(t.elements))}static fromMatrix3(t){return new R(qt(t.elements))}static translate(t){return new R(Xt(t.elements))}static scale(t){return new R(Bt(t.elements))}static scaleScalar(t){return new R(Gt(t))}static rotateX(t){return new R(Dt(t))}static rotateY(t){return new R(Ht(t))}static rotateZ(t){return new R(Nt(t))}static lookAt(t,e=new d([0,0,0]),o=new d([0,1,0]),n=0){return new R(zt(t.elements,e.elements,o.elements,n))}static lookAtInverse(t,e=new d([0,0,0]),o=new d([0,1,0]),n=0){return new R(Ot(t.elements,e.elements,o.elements,n))}static perspective(t=45,e=.01,o=100){return new R($t(t,e,o))}static compose(t,e,o){return new R(Ft(t.elements,e.elements,o.elements))}};function Yt(r,t){let e=t/2,o=Math.sin(e);return[r[0]*o,r[1]*o,r[2]*o,Math.cos(e)]}function xr(r,t){let{normal:e,tangent:o,binormal:n}=at(r,t!=null?t:[0,1,0]),a=Math.sqrt(1+n[0]+o[1]+e[2])*.5,s=.25/a;return[(o[2]-e[1])*s,(e[0]-n[2])*s,(n[1]-o[0])*s,a]}function Zt(r){let t=S(r);return t===0?[0,0,0,1]:w(r,1/t)}function br(r,t,e){if(e===0)return r.concat();if(e===1)return t.concat();let o=V(r,t);if(o<0&&(t=B(t),o=-o),o>=1)return r.concat();let n=1-o*o;if(n<=Number.EPSILON){let m=1-e;return v([m*r[0]+e*t[0],m*r[1]+e*t[1],m*r[2]+e*t[2],m*r[3]+e*t[3]])}let a=Math.sqrt(n),s=Math.atan2(a,o),u=Math.sin((1-e)*s)/a,i=Math.sin(e*s)/a;return[r[0]*u+t[0]*i,r[1]*u+t[1]*i,r[2]*u+t[2]*i,r[3]*u+t[3]*i]}var wr=[0,0,0,1],M=class{constructor(t=wr){this.elements=t}get x(){return this.elements[0]}get y(){return this.elements[1]}get z(){return this.elements[2]}get w(){return this.elements[3]}toString(){return`Quaternion( ${this.x.toFixed(3)}, ${this.y.toFixed(3)}, ${this.z.toFixed(3)}, ${this.w.toFixed(3)} )`}clone(){return new M(this.elements.concat())}get matrix4(){return new R(G(this.elements))}get inversed(){return new M(it(this.elements))}get length(){return S(this.elements)}get lengthSq(){return et(this.elements)}get normalized(){return new M(Zt(this.elements))}multiply(...t){return M.multiply(this,...t)}slerp(t,e){return M.slerp(this,t,e)}static get identity(){return new M(wr)}static multiply(...t){return t.length===0?M.identity:new M(K(...t.map(e=>e.elements)))}static slerp(t,e,o){return new M(br(t.elements,e.elements,o))}static lookRotation(t,e){return new M(xr(t.elements,e.elements))}static fromAxisAngle(t,e){return new M(Yt(t.elements,e))}static fromMatrix4(t){return new M(mt(t.elements))}};function rr(r,t){return r-Math.floor(r/t)*t}function ht(r){return rr(r+Math.PI,2*Math.PI)-Math.PI}function j(r,t){let[e,o,n,a]=!t||t==="XYZ"?[0,1,2,1]:t==="XZY"?[0,2,1,-1]:t==="YXZ"?[1,0,2,-1]:t==="YZX"?[1,2,0,1]:t==="ZXY"?[2,0,1,1]:[2,1,0,-1],s=[0,0,0],u=r[n+e*3];return s[o]=-a*Math.asin(_t(u,-1,1)),Math.abs(u)<.999999?(s[e]=a*Math.atan2(r[n+o*3],r[n*4]),s[n]=a*Math.atan2(r[o+e*3],r[e*4])):s[e]=a*Math.atan2(-r[o+n*3],r[o*4]),ot(s)>1.5*Math.PI&&(s[e]=ht(s[e]+Math.PI),s[o]=ht(Math.PI-s[o]),s[n]=ht(s[n]+Math.PI)),s}function er(r,t){return j(N(r),t)}function or(r,t){return j(rt(r),t)}function Kt(r,t){let[e,o,n,a]=!t||t==="XYZ"?[0,1,2,1]:t==="XZY"?[0,2,1,-1]:t==="YXZ"?[1,0,2,-1]:t==="YZX"?[1,2,0,1]:t==="ZXY"?[2,0,1,1]:[2,1,0,-1],s=.5*r[e],u=.5*a*r[o],i=.5*r[n],m=Math.cos(s),p=Math.cos(u),c=Math.cos(i),l=Math.sin(s),h=Math.sin(u),x=Math.sin(i),b=[0,0,0,c*p*m+x*h*l];return b[e]=c*p*l-x*h*m,b[o]=a*(c*h*m+x*p*l),b[n]=x*p*m-c*h*l,b}var W=class{constructor(t=[0,0,0],e="XYZ"){this.elements=t,this.order=e}get x(){return this.elements[0]}get y(){return this.elements[1]}get z(){return this.elements[2]}toString(){return`Euler( ${this.x.toFixed(3)}, ${this.y.toFixed(3)}, ${this.z.toFixed(3)} (${this.order}) )`}clone(){return new W(this.elements.concat(),this.order)}get quaternion(){return new M(Kt(this.elements,this.order))}get matrix4(){return this.quaternion.matrix4}static fromMatrix3(t,e){return new W(j(t.elements,e),e)}static fromMatrix4(t,e){return new W(er(t.elements,e),e)}static fromQuaternion(t,e){return new W(or(t.elements,e),e)}};function Rr(r){return[r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]]}var X=class extends Z{constructor(t=[0,0,0,0]){super();this.elements=t}get x(){return this.elements[0]}set x(t){this.elements[0]=t}get y(){return this.elements[1]}set y(t){this.elements[1]=t}get z(){return this.elements[2]}set z(t){this.elements[2]=t}get w(){return this.elements[3]}set w(t){this.elements[3]=t}toString(){return`Vector4( ${this.x.toFixed(3)}, ${this.y.toFixed(3)}, ${this.z.toFixed(3)}, ${this.w.toFixed(3)} )`}applyMatrix4(t){return new X(nt(this.elements,t.elements))}__new(t){return new X(t)}static get zero(){return new X([0,0,0,0])}static get one(){return new X([1,1,1,1])}};var J=["2","3","4","5","6","7","8","9","T","J","Q","K","A"];var nr=["c","d","h","s"];function Yr(){let r=[];return nr.map(t=>J.map(e=>r.push(e+t))),r}var $={HighCard:0,OnePair:1,TwoPair:2,ThreeOfAKind:3,Straight:4,Flush:5,FullHouse:6,FourOfAKind:7,StraightFlush:8};var f={"2":0,"3":1,"4":2,"5":3,"6":4,"7":5,"8":6,"9":7,T:8,J:9,Q:10,K:11,A:12};var jt={c:0,d:1,h:2,s:3};function C(r){return r.sort((t,e)=>jt[t[1]]-jt[e[1]]).sort((t,e)=>f[t[0]]-f[e[0]])}function Zr(r){let t=r.concat(),e=new ut,o=new ut;t.map(i=>{let m=i[0],p=i[1];e.add(m,i),o.add(p,i)});let n=[],a=[],s=[];J.map(i=>{let m=e.get(i);m.size>3?n.push(i):m.size>2?a.push(i):m.size>1&&s.push(i)});let u;{let i=[],m=Array.from(e.get("A"))[0];m&&i.push(m),J.map(p=>{let c=Array.from(e.get(p))[0];c?(i.push(c),i.length>4&&(u=i)):i=[]})}if(u){for(let[i,m]of o.map)if(m.size>0){let p,c=[],l="A"+i;if(m.has(l)&&c.push(l),J.map(x=>{let b=x+i;m.has(b)?(c.push(b),c.length>4&&(p=c)):c=[]}),p){p.splice(0,p.length-5);let x="StraightFlush",b=[$[x],f[p[4][0]]];return{hand:x,cards:p,strength:b}}}}if(n.length>0){n.sort((c,l)=>f[c]-f[l]),n.splice(0,n.length-1);let i=Array.from(e.get(n[0]));i.map(c=>t.splice(t.indexOf(c),1)),C(t).splice(0,t.length-1);let m="FourOfAKind",p=[$[m],f[n[0]],f[t[0][0]]];return t.push(...i),C(t),{hand:m,cards:t,strength:p}}if(a.length>0&&a.length+s.length>1){a.sort((c,l)=>f[c]-f[l]),s.push(...a.splice(0,a.length-1)),s.sort((c,l)=>f[c]-f[l]),s.splice(0,s.length-1);let i=Array.from(e.get(a[0]));i.push(...Array.from(e.get(s[0]))),C(i).splice(0,i.length-5);let m="FullHouse",p=[$[m],f[a[0]],f[s[0]]];return{hand:m,cards:i,strength:p}}for(let[i,m]of o.map)if(m.size>4){let p=C(Array.from(m));p.splice(0,p.length-5);let c="Flush",l=[$[c],...p.concat().reverse().map(h=>f[h[0]])];return{hand:c,cards:p,strength:l}}if(u){u.splice(0,u.length-5);let i="Straight",m=[$[i],f[u[4][0]]];return{hand:i,cards:u,strength:m}}if(a.length>0){a.sort((c,l)=>f[c]-f[l]),a.splice(0,a.length-1);let i=Array.from(e.get(a[0]));i.map(c=>t.splice(t.indexOf(c),1)),C(t).splice(0,t.length-2);let m="ThreeOfAKind",p=[$[m],f[a[0]],f[t[1][0]],f[t[0][0]]];return t.push(...i),C(t),{hand:m,cards:t,strength:p}}if(s.length>1){s.sort((c,l)=>f[c]-f[l]),s.splice(0,s.length-2);let i=Array.from(e.get(s[0]));i.push(...Array.from(e.get(s[1]))),i.map(c=>t.splice(t.indexOf(c),1)),C(t).splice(0,t.length-1);let m="TwoPair",p=[$[m],f[s[1]],f[s[0]],f[t[0][0]]];return t.push(...i),C(t),{hand:m,cards:t,strength:p}}if(s.length>0){let i=Array.from(e.get(s[0]));i.map(c=>t.splice(t.indexOf(c),1)),C(t).splice(0,t.length-3);let m="OnePair",p=[$[m],f[s[0]],f[t[2][0]],f[t[1][0]],f[t[0][0]]];return t.push(...i),C(t),{hand:m,cards:t,strength:p}}{let i="HighCard";C(t),t.splice(0,t.length-5);let m=[$[i],f[t[4][0]],f[t[3][0]],f[t[2][0]],f[t[1][0]],f[t[0][0]]];return{hand:i,cards:t,strength:m}}}var Kr=["HighCard","OnePair","TwoPair","ThreeOfAKind","Straight","Flush","FullHouse","FourOfAKind","StraightFlush"];var dr=class{constructor(t,e){this.i=t,this.o=e}swap(){let t=this.i;this.i=this.o,this.o=t}};var Mr=class{constructor(){this.__bpm=0;this.__lastTap=0;this.__lastBeat=0;this.__lastTime=0;this.__calc=new Tt(16)}get beatDuration(){return 60/this.__bpm}get bpm(){return this.__bpm}set bpm(t){this.__lastBeat=this.beat,this.__lastTime=performance.now(),this.__bpm=t}get beat(){return this.__lastBeat+(performance.now()-this.__lastTime)*.001/this.beatDuration}reset(){this.__calc.reset()}nudge(t){this.__lastBeat=this.beat+t,this.__lastTime=performance.now()}tap(){let t=performance.now(),e=(t-this.__lastTap)*.001;2<e?this.reset():(this.__calc.push(e),this.__bpm=60/this.__calc.mean),this.__lastTap=t,this.__lastTime=t,this.__lastBeat=0}};var _r=class{constructor(t){this.seed=t||1}gen(t){return t&&(this.seed=t),this.seed=this.seed^this.seed<<13,this.seed=this.seed^this.seed>>>17,this.seed=this.seed^this.seed<<5,this.seed/Math.pow(2,32)+.5}set(t){this.seed=t||this.seed||1}};function yr(r,t,e=.5){if(t>=1)return r;if(t<0)return"";let o=Y(0,1-e,t),n=Y(e,1,t),a=1+Math.floor(o*(r.length-1)),s=t<e?0:1+Math.floor(n*(r.length-1)),u=a-s,i=[...Array(u)].map(()=>String.fromCharCode(33+Math.floor(93*Math.random()))).join("");return r.substring(0,s)+i}return Sr(jr);})();
//# sourceMappingURL=0b5vr-experimental.iife.min.js.map
