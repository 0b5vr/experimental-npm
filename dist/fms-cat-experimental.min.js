// (c) 2019-2020 FMS_Cat - https://github.com/FMS-Cat/experimental-npm/blob/master/LICENSE
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).FMS_CAT_EXPERIMENTAL={})}(this,(function(t){"use strict";function e(t,n){if("function"!=typeof n)return e(t,(function(t){return t<=n}));for(var r=n,i=0,o=t.length;i<o;){var s=i+o>>1;r(t[s])?i=s+1:o=s}return i}var n=function(){function t(){this.factor=100,this.ratio=1,this.velocity=0,this.value=0,this.target=0}return t.prototype.update=function(t){return this.velocity+=(-this.factor*(this.value-this.target)-2*this.velocity*Math.sqrt(this.factor)*this.ratio)*t,this.value+=this.velocity*t,this.value},t}(),r=function(){function t(){this.__time=0,this.__deltaTime=0,this.__isPlaying=!1}return Object.defineProperty(t.prototype,"time",{get:function(){return this.__time},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deltaTime",{get:function(){return this.__deltaTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this.__isPlaying},enumerable:!0,configurable:!0}),t.prototype.update=function(t){var e=this.__time;this.__time=t||0,this.__deltaTime=this.__time-e},t.prototype.play=function(){this.__isPlaying=!0},t.prototype.pause=function(){this.__isPlaying=!1},t.prototype.setTime=function(t){this.__time=t},t}(),i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function s(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t}var a=function(t){function e(e){void 0===e&&(e=60);var n=t.call(this)||this;return n.__frame=0,n.__fps=e,n}return o(e,t),Object.defineProperty(e.prototype,"frame",{get:function(){return this.__frame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fps",{get:function(){return this.__fps},enumerable:!0,configurable:!0}),e.prototype.update=function(){this.__isPlaying?(this.__time=this.__frame/this.__fps,this.__deltaTime=1/this.__fps,this.__frame++):this.__deltaTime=0},e.prototype.setTime=function(t){this.__frame=Math.floor(this.__fps*t),this.__time=this.__frame/this.__fps},e}(r),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.__rtTime=0,e.__rtDate=performance.now(),e}return o(e,t),Object.defineProperty(e.prototype,"isRealtime",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.update=function(){var t=performance.now();if(this.__isPlaying){var e=this.__time,n=t-this.__rtDate;this.__time=this.__rtTime+n/1e3,this.__deltaTime=this.time-e}else this.__rtTime=this.time,this.__rtDate=t,this.__deltaTime=0},e.prototype.setTime=function(t){this.__time=t,this.__rtTime=this.time,this.__rtDate=performance.now()},e}(r);function h(t,e,n,r){var i=0,o=new Float32Array(r);o[0]=0;var s=new Float32Array(r+1);s[0]=-1/0,s[1]=1/0;for(var u=new Float32Array(r),a=0;a<r;a++)u[a]=t[e+a*n];for(a=1;a<r;a++){for(var c=0;0<=i&&(c=(u[a]+a*a-u[o[i]]-o[i]*o[i])/(2*a-2*o[i]))<=s[i];)i--;o[++i]=a,s[i]=c,s[i+1]=1/0}i=0;for(a=0;a<r;a++){for(;s[i+1]<a;)i++;var h=a-o[i];t[e+a*n]=u[o[i]]+h*h}}function l(t,e,n){return t+(e-t)*n}function f(t,e,n){return Math.min(Math.max(t,e),n)}function _(t){return f(t,0,1)}function p(t,e,n){return _((n-t)/(e-t))}var y=function(){function t(){this.factor=10,this.target=0,this.value=0}return t.prototype.update=function(t){return this.value=l(this.target,this.value,Math.exp(-this.factor*t)),this.value},t}(),m=function(){function t(e,n,r){void 0===e&&(e=t.WordsDefault),void 0===n&&(n=1),void 0===r&&(r=100),this.__words=e,this.__index=n,this.__end=r}return t.prototype[Symbol.iterator]=function(){return this},t.prototype.next=function(){var t,e;if(this.__end<this.__index)return{done:!0,value:null};var n="";try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.__words),i=r.next();!i.done;i=r.next()){var o=s(i.value,2),u=o[0],a=o[1];this.__index%u==0&&(n+=a)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return""===n&&(n=this.__index),this.__index++,{done:!1,value:n}},t.WordsDefault=new Map([[3,"Fizz"],[5,"Buzz"]]),t}(),d=function(){function t(){}return t.gif="https://fms-cat.com/images/fms_cat.gif",t.png="https://fms-cat.com/images/fms_cat.png",t}(),b=function(){function t(t){this.__recalcForEach=0,this.__countUntilRecalc=0,this.__history=[],this.__index=0,this.__count=0,this.__cache=0,this.__length=t,this.__recalcForEach=t;for(var e=0;e<t;e++)this.__history[e]=0}return Object.defineProperty(t.prototype,"mean",{get:function(){var t=Math.min(this.__count,this.__length);return 0===t?0:this.__cache/t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recalcForEach",{get:function(){return this.__recalcForEach},set:function(t){var e=t-this.__recalcForEach;this.__recalcForEach=t,this.__countUntilRecalc=Math.max(0,this.__countUntilRecalc+e)},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.__index=0,this.__count=0,this.__cache=0,this.__countUntilRecalc=0;for(var t=0;t<this.__length;t++)this.__history[t]=0},t.prototype.push=function(t){var e=this.__history[this.__index];this.__history[this.__index]=t,this.__count++,this.__index=(this.__index+1)%this.__length,0===this.__countUntilRecalc?this.recalc():(this.__countUntilRecalc--,this.__cache-=e,this.__cache+=t)},t.prototype.recalc=function(){this.__countUntilRecalc=this.__recalcForEach;var t=this.__history.slice(0,Math.min(this.__count,this.__length)).reduce((function(t,e){return t+e}),0);this.__cache=t},t}(),g=function(t){function e(e){var n=t.call(this,e)||this;return console.warn("HistoryMedianCalculator: Deprecated. Use HistoryPercentileCalculator instead"),n}return o(e,t),e}(function(){function t(t){this.__history=[],this.__sorted=[],this.__index=0,this.__length=t}return Object.defineProperty(t.prototype,"median",{get:function(){return this.percentile(50)},enumerable:!0,configurable:!0}),t.prototype.percentile=function(t){return 0===this.__history.length?0:this.__sorted[Math.round(.01*t*(this.__history.length-1))]},t.prototype.reset=function(){this.__index=0,this.__history=[],this.__sorted=[]},t.prototype.push=function(t){var n=this.__history[this.__index];if(this.__history[this.__index]=t,this.__index=(this.__index+1)%this.__length,this.__sorted.length===this.__length){var r=e(this.__sorted,n);this.__sorted.splice(r,1)}var i=e(this.__sorted,t);this.__sorted.splice(i,0,t)},t}()),v=function(){function t(){}return Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.elements.reduce((function(t,e){return t+e*e}),0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"normalized",{get:function(){return this.scale(1/this.length)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return this.__new(this.elements.concat())},t.prototype.add=function(t){return this.__new(this.elements.map((function(e,n){return e+t.elements[n]})))},t.prototype.sub=function(t){return this.__new(this.elements.map((function(e,n){return e-t.elements[n]})))},t.prototype.multiply=function(t){return this.__new(this.elements.map((function(e,n){return e*t.elements[n]})))},t.prototype.divide=function(t){return this.__new(this.elements.map((function(e,n){return e/t.elements[n]})))},t.prototype.scale=function(t){return this.__new(this.elements.map((function(e){return e*t})))},t.prototype.dot=function(t){return this.elements.reduce((function(e,n,r){return e+n*t.elements[r]}),0)},t}(),x=function(t){function e(e){void 0===e&&(e=[0,0,0]);var n=t.call(this)||this;return n.elements=e,n}return o(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.elements[0]},set:function(t){this.elements[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.elements[1]},set:function(t){this.elements[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this.elements[2]},set:function(t){this.elements[2]=t},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Vector3( "+this.x.toFixed(3)+", "+this.y.toFixed(3)+", "+this.z.toFixed(3)+" )"},e.prototype.cross=function(t){return new e([this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x])},e.prototype.applyQuaternion=function(t){var n=new z([this.x,this.y,this.z,0]),r=t.inversed,i=t.multiply(n).multiply(r);return new e([i.x,i.y,i.z])},e.prototype.applyMatrix4=function(t){var n=t.elements,r=1/(n[3]*this.x+n[7]*this.y+n[11]*this.z+n[15]);return new e([(n[0]*this.x+n[4]*this.y+n[8]*this.z+n[12])*r,(n[1]*this.x+n[5]*this.y+n[9]*this.z+n[13])*r,(n[2]*this.x+n[6]*this.y+n[10]*this.z+n[14])*r])},e.prototype.__new=function(t){return new e(t)},Object.defineProperty(e,"zero",{get:function(){return new e([0,0,0])},enumerable:!0,configurable:!0}),Object.defineProperty(e,"one",{get:function(){return new e([1,1,1])},enumerable:!0,configurable:!0}),e}(v),w=[0,0,0,1],z=function(){function t(t){void 0===t&&(t=w),this.elements=t}return Object.defineProperty(t.prototype,"x",{get:function(){return this.elements[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.elements[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this.elements[2]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this.elements[3]},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"Quaternion( "+this.x.toFixed(3)+", "+this.y.toFixed(3)+", "+this.z.toFixed(3)+", "+this.w.toFixed(3)+" )"},t.prototype.clone=function(){return new t(this.elements.concat())},Object.defineProperty(t.prototype,"matrix",{get:function(){var t=new x([1,0,0]).applyQuaternion(this),e=new x([0,1,0]).applyQuaternion(this),n=new x([0,0,1]).applyQuaternion(this);return new P([t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inversed",{get:function(){return new t([-this.x,-this.y,-this.z,this.w])},enumerable:!0,configurable:!0}),t.prototype.multiply=function(e){return new t([this.w*e.x+this.x*e.w+this.y*e.z-this.z*e.y,this.w*e.y-this.x*e.z+this.y*e.w+this.z*e.x,this.w*e.z+this.x*e.y-this.y*e.x+this.z*e.w,this.w*e.w-this.x*e.x-this.y*e.y-this.z*e.z])},Object.defineProperty(t,"identity",{get:function(){return new t(w)},enumerable:!0,configurable:!0}),t.fromAxisAngle=function(e,n){var r=n/2,i=Math.sin(r);return new t([e.x*i,e.y*i,e.z*i,Math.cos(r)])},t.fromMatrix=function(e){var n,r=e.elements,i=r[0],o=r[4],s=r[8],u=r[1],a=r[5],c=r[9],h=r[2],l=r[6],f=r[10],_=i+a+f;return new t(_>0?[(l-c)*(n=.5/Math.sqrt(_+1)),(s-h)*n,(u-o)*n,.25/n]:i>a&&i>f?[.25*(n=2*Math.sqrt(1+i-a-f)),(o+u)/n,(s+h)/n,(l-c)/n]:a>f?[(o+u)/(n=2*Math.sqrt(1+a-i-f)),.25*n,(c+l)/n,(s-h)/n]:[(s+h)/(n=2*Math.sqrt(1+f-i-a)),(c+l)/n,.25*n,(u-o)/n])},t}(),M=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],P=function(){function t(t){void 0===t&&(t=M),this.elements=t}return Object.defineProperty(t.prototype,"transpose",{get:function(){var e=this.elements;return new t([e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"determinant",{get:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],u=t[6],a=t[7],c=t[8],h=t[9],l=t[10],f=t[11],_=t[12],p=t[13],y=t[14],m=t[15];return(e*s-n*o)*(l*m-f*y)-(e*u-r*o)*(h*m-f*p)+(e*a-i*o)*(h*y-l*p)+(n*u-r*s)*(c*m-f*_)-(n*a-i*s)*(c*y-l*_)+(r*a-i*u)*(c*p-h*_)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inverse",{get:function(){var e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],u=e[5],a=e[6],c=e[7],h=e[8],l=e[9],f=e[10],_=e[11],p=e[12],y=e[13],m=e[14],d=e[15],b=n*u-r*s,g=n*a-i*s,v=n*c-o*s,x=r*a-i*u,w=r*c-o*u,z=i*c-o*a,M=h*y-l*p,P=h*m-f*p,O=h*d-_*p,j=l*m-f*y,T=l*d-_*y,F=f*d-_*m,S=b*F-g*T+v*j+x*O-w*P+z*M;if(0===S)return null;var A=1/S;return new t([u*F-a*T+c*j,i*T-r*F-o*j,y*z-m*w+d*x,f*w-l*z-_*x,a*O-s*F-c*P,n*F-i*O+o*P,m*v-p*z-d*g,h*z-f*v+_*g,s*T-u*O+c*M,r*O-n*T-o*M,p*w-y*v+d*b,l*v-h*w-_*b,u*P-s*j-a*M,n*j-r*P+i*M,y*g-p*x-m*b,h*x-l*g+f*b].map((function(t){return t*A})))},enumerable:!0,configurable:!0}),t.prototype.toString=function(){var t=this.elements.map((function(t){return t.toFixed(3)}));return"Matrix4( "+t[0]+", "+t[4]+", "+t[8]+", "+t[12]+"; "+t[1]+", "+t[5]+", "+t[9]+", "+t[13]+"; "+t[2]+", "+t[6]+", "+t[10]+", "+t[14]+"; "+t[3]+", "+t[7]+", "+t[11]+", "+t[15]+" )"},t.prototype.clone=function(){return new t(this.elements.concat())},t.prototype.multiply=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0===e.length)return this.clone();var r=e.concat(),i=r.shift();0<r.length&&(i=i.multiply.apply(i,u(r)));var o=this.elements,s=i.elements;return new t([o[0]*s[0]+o[4]*s[1]+o[8]*s[2]+o[12]*s[3],o[1]*s[0]+o[5]*s[1]+o[9]*s[2]+o[13]*s[3],o[2]*s[0]+o[6]*s[1]+o[10]*s[2]+o[14]*s[3],o[3]*s[0]+o[7]*s[1]+o[11]*s[2]+o[15]*s[3],o[0]*s[4]+o[4]*s[5]+o[8]*s[6]+o[12]*s[7],o[1]*s[4]+o[5]*s[5]+o[9]*s[6]+o[13]*s[7],o[2]*s[4]+o[6]*s[5]+o[10]*s[6]+o[14]*s[7],o[3]*s[4]+o[7]*s[5]+o[11]*s[6]+o[15]*s[7],o[0]*s[8]+o[4]*s[9]+o[8]*s[10]+o[12]*s[11],o[1]*s[8]+o[5]*s[9]+o[9]*s[10]+o[13]*s[11],o[2]*s[8]+o[6]*s[9]+o[10]*s[10]+o[14]*s[11],o[3]*s[8]+o[7]*s[9]+o[11]*s[10]+o[15]*s[11],o[0]*s[12]+o[4]*s[13]+o[8]*s[14]+o[12]*s[15],o[1]*s[12]+o[5]*s[13]+o[9]*s[14]+o[13]*s[15],o[2]*s[12]+o[6]*s[13]+o[10]*s[14]+o[14]*s[15],o[3]*s[12]+o[7]*s[13]+o[11]*s[14]+o[15]*s[15]])},t.prototype.scaleScalar=function(e){return new t(this.elements.map((function(t){return t*e})))},Object.defineProperty(t,"identity",{get:function(){return new t(M)},enumerable:!0,configurable:!0}),t.multiply=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0===e.length)return t.identity;var r=e.concat(),i=r.shift();return i.multiply.apply(i,u(r))},t.translate=function(e){return new t([1,0,0,0,0,1,0,0,0,0,1,0,e.x,e.y,e.z,1])},t.scale=function(e){return new t([e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1])},t.scaleScalar=function(e){return new t([e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1])},t.rotateX=function(e){return new t([1,0,0,0,0,Math.cos(e),-Math.sin(e),0,0,Math.sin(e),Math.cos(e),0,0,0,0,1])},t.rotateY=function(e){return new t([Math.cos(e),0,Math.sin(e),0,0,1,0,0,-Math.sin(e),0,Math.cos(e),0,0,0,0,1])},t.rotateZ=function(e){return new t([Math.cos(e),-Math.sin(e),0,0,Math.sin(e),Math.cos(e),0,0,0,0,1,0,0,0,0,1])},t.lookAt=function(e,n,r,i){void 0===n&&(n=new x([0,0,0])),void 0===r&&(r=new x([0,1,0])),void 0===i&&(i=0);var o=e.sub(n).normalized,s=r.cross(o).normalized,u=o.cross(s);return s=s.scale(Math.cos(i)).add(u.scale(Math.sin(i))),u=o.cross(s),new t([s.x,s.y,s.z,0,u.x,u.y,u.z,0,o.x,o.y,o.z,0,e.x,e.y,e.z,1])},t.lookAtInverse=function(e,n,r,i){void 0===n&&(n=new x([0,0,0])),void 0===r&&(r=new x([0,1,0])),void 0===i&&(i=0);var o=e.sub(n).normalized,s=r.cross(o).normalized,u=o.cross(s);return s=s.scale(Math.cos(i)).add(u.scale(Math.sin(i))),u=o.cross(s),new t([s.x,u.x,o.x,0,s.y,u.y,o.y,0,s.z,u.z,o.z,0,-s.x*e.x-s.y*e.y-s.z*e.z,-u.x*e.x-u.y*e.y-u.z*e.z,-o.x*e.x-o.y*e.y-o.z*e.z,1])},t.perspective=function(e,n,r){void 0===e&&(e=45),void 0===n&&(n=.01),void 0===r&&(r=100);var i=1/Math.tan(e*Math.PI/360),o=r-n;return new t([i,0,0,0,0,i,0,0,0,0,-(r+n)/o,-1,0,0,-2*r*n/o,0])},t.prototype.decompose=function(){var t=this.elements,e=new x([t[0],t[1],t[2]]).length,n=new x([t[4],t[5],t[6]]).length,r=new x([t[8],t[9],t[10]]).length;this.determinant<0&&(e=-e);var i=1/e,o=1/n,s=1/r,u=this.clone();return u.elements[0]*=i,u.elements[1]*=i,u.elements[2]*=i,u.elements[4]*=o,u.elements[5]*=o,u.elements[6]*=o,u.elements[8]*=s,u.elements[9]*=s,u.elements[10]*=s,{position:new x([t[12],t[13],t[14]]),scale:new x([e,n,r]),rotation:z.fromMatrix(u)}},t.compose=function(e,n,r){var i=n.x,o=n.y,s=n.z,u=n.w,a=i+i,c=o+o,h=s+s,l=i*a,f=i*c,_=i*h,p=o*c,y=o*h,m=s*h,d=u*a,b=u*c,g=u*h,v=r.x,x=r.y,w=r.z;return new t([(1-(p+m))*v,(f+g)*v,(_-b)*v,0,(f-g)*x,(1-(l+m))*x,(y+d)*x,0,(_+b)*w,(y-d)*w,(1-(l+p))*w,0,e.x,e.y,e.z,1])},t}(),O=function(t){function e(e){void 0===e&&(e=[0,0,0,0]);var n=t.call(this)||this;return n.elements=e,n}return o(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.elements[0]},set:function(t){this.elements[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.elements[1]},set:function(t){this.elements[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this.elements[2]},set:function(t){this.elements[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"w",{get:function(){return this.elements[3]},set:function(t){this.elements[3]=t},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Vector4( "+this.x.toFixed(3)+", "+this.y.toFixed(3)+", "+this.z.toFixed(3)+", "+this.w.toFixed(3)+" )"},e.prototype.applyMatrix4=function(t){var n=t.elements;return new e([n[0]*this.x+n[4]*this.y+n[8]*this.z+n[12]*this.w,n[1]*this.x+n[5]*this.y+n[9]*this.z+n[13]*this.w,n[2]*this.x+n[6]*this.y+n[10]*this.z+n[14]*this.w,n[3]*this.x+n[7]*this.y+n[11]*this.z+n[15]*this.w])},e.prototype.__new=function(t){return new e(t)},Object.defineProperty(e,"zero",{get:function(){return new e([0,0,0,0])},enumerable:!0,configurable:!0}),Object.defineProperty(e,"one",{get:function(){return new e([1,1,1,1])},enumerable:!0,configurable:!0}),e}(v),j=function(){function t(t,e){this.i=t,this.o=e}return t.prototype.swap=function(){var t=this.i;this.i=this.o,this.o=t},t}(),T=function(){function t(){this.__bpm=0,this.__lastTap=0,this.__lastBeat=0,this.__lastTime=0,this.__calc=new b(16)}return Object.defineProperty(t.prototype,"beatDuration",{get:function(){return 60/this.__bpm},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bpm",{get:function(){return this.__bpm},set:function(t){this.__lastBeat=this.beat,this.__lastTime=performance.now(),this.__bpm=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"beat",{get:function(){return this.__lastBeat+.001*(performance.now()-this.__lastTime)/this.beatDuration},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.__calc.reset()},t.prototype.nudge=function(t){this.__lastBeat=this.beat+t,this.__lastTime=performance.now()},t.prototype.tap=function(){var t=performance.now(),e=.001*(t-this.__lastTap);2<e?this.reset():(this.__calc.push(e),this.__bpm=60/this.__calc.mean),this.__lastTap=t,this.__lastTime=t,this.__lastBeat=0},t}(),F=function(){function t(t){this.seed=t||1}return t.prototype.gen=function(t){return t&&(this.seed=t),this.seed=this.seed^this.seed<<13,this.seed=this.seed^this.seed>>>17,this.seed=this.seed^this.seed<<5,this.seed/Math.pow(2,32)+.5},t.prototype.set=function(t){this.seed=t||this.seed||1},t}();t.CDS=n,t.Clock=r,t.ClockFrame=a,t.ClockRealtime=c,t.ExpSmooth=y,t.FMS_Cat=d,t.FizzBuzz=m,t.HistoryMeanCalculator=b,t.HistoryMedianCalculator=g,t.Matrix4=P,t.Quaternion=z,t.Swap=j,t.TRIANGLE_STRIP_QUAD=[-1,-1,1,-1,-1,1,1,1],t.TRIANGLE_STRIP_QUAD_3D=[-1,-1,0,1,-1,0,-1,1,0,1,1,0],t.TRIANGLE_STRIP_QUAD_NORMAL=[0,0,1,0,0,1,0,0,1,0,0,1],t.TRIANGLE_STRIP_QUAD_UV=[0,0,1,0,0,1,1,1],t.TapTempo=T,t.Vector=v,t.Vector3=x,t.Vector4=O,t.Xorshift=F,t.binarySearch=e,t.clamp=f,t.edt1d=h,t.edt2d=function(t,e,n){for(var r=0;r<e;r++)h(t,r,e,n);for(var i=0;i<n;i++)h(t,i*e,1,e)},t.lerp=l,t.linearstep=p,t.matrix2d=function(t,e){for(var n=[],r=0;r<e;r++)for(var i=0;i<t;i++)n.push(i,r);return n},t.range=function(t,e,n,r,i){return(t-e)*(i-r)/(n-e)+r},t.rawIdentityMatrix4=M,t.rawIdentityQuaternion=w,t.saturate=_,t.shuffleArray=function(t,e){for(var n=e||function(){return Math.random()},r=0;r<t.length-1;r++){var i=r+Math.floor(n()*(t.length-r)),o=t[i];t[i]=t[r],t[r]=o}return t},t.smootherstep=function(t,e,n){var r=p(t,e,n);return r*r*r*(r*(6*r-15)+10)},t.smootheststep=function(t,e,n){var r=p(t,e,n);return r*r*r*r*(r*(r*(-20*r+70)-84)+35)},t.smoothstep=function(t,e,n){var r=p(t,e,n);return r*r*(3-2*r)},t.triIndexToLineIndex=function(t){for(var e=[],n=0;n<t.length/3;n++){var r=3*n;e.push(t[r],t[r+1],t[r+1],t[r+2],t[r+2],t[r])}return e},Object.defineProperty(t,"__esModule",{value:!0})}));
